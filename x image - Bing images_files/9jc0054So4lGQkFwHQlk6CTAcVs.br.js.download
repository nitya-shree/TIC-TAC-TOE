var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},SydFSCHelper;(function(n){function lu(i){var na=this,vt,yt,pt,bt,kt,e,ei,g,bl,o,oi,h,y,nt,tt,s,ai,vi,v,it,bi,et,ki,di,ut,st,gi,p,ht,kl,nr,dl,tr,lt,w,at,gl;i===void 0&&(i=null);e=_w._sydConvConfig;n.isConfigSet=!0;var ir=t(e===null||e===void 0?void 0:e.country,!1),rr=t(e===null||e===void 0?void 0:e.countryConfidence,!1),ur=t(e===null||e===void 0?void 0:e.state,!1),fr=t(e===null||e===void 0?void 0:e.city,!1),er=t(e===null||e===void 0?void 0:e.cityConfidence,!1),or=t(e===null||e===void 0?void 0:e.zip,!1),sr=t(e===null||e===void 0?void 0:e.timezoneoffset,!1),ta=t(e===null||e===void 0?void 0:e.enableTimezoneOffsetFromJS,!1),hr=t(e===null||e===void 0?void 0:e.dma,!1),ar=t(e===null||e===void 0?void 0:e.lat,!1),pr=t(e===null||e===void 0?void 0:e.long,!1),ia=t(e===null||e===void 0?void 0:e.userIpAddress,""),ra=t(e===null||e===void 0?void 0:e.overrideSydOptions,!1),wr=t(e===null||e===void 0?void 0:e.sydOptionSets,!1),br=t(e===null||e===void 0?void 0:e.voiceSrOptions,""),kr=t(e===null||e===void 0?void 0:e.sydUrlPart,!1),ni=t(e===null||e===void 0?void 0:e.isSydCorpnet,!1),ua=t(e===null||e===void 0?void 0:e.enableSydOverlay,!1),fa=t(e===null||e===void 0?void 0:e.enableEdgeMobileNativeTTS,!1),ea=t(e===null||e===void 0?void 0:e.isVisualParityRun,!1),oa=t(e===null||e===void 0?void 0:e.isMSAAuthenticated,!1),sa=t(e===null||e===void 0?void 0:e.userMailId,""),ha=t(e===null||e===void 0?void 0:e.username,""),dr=t(e===null||e===void 0?void 0:e.sydBaseUrl,!1),b=t(e===null||e===void 0?void 0:e.isCompliantSydneyEndpointEnabled,!1),ti=t(e===null||e===void 0?void 0:e.isBingChatForEnterprise,!1),ca=t(e===null||e===void 0?void 0:e.isBingChatForSchools,!1);a=ca||ti;ft=a&&t(e===null||e===void 0?void 0:e.bfbCookieChatConsented,!1);var gr=t(e===null||e===void 0?void 0:e.sydIDs,""),nu=t(e===null||e===void 0?void 0:e.traceId,""),la=t(_w._sydConvTranslation,{}),aa=t(e===null||e===void 0?void 0:e.enableSydMic,!1),tu=t(e===null||e===void 0?void 0:e.enableSydShare,!1),va=t(e===null||e===void 0?void 0:e.enableMessageShareableSignalV2,!1),ya=t(e===null||e===void 0?void 0:e.addDv3Opt,!1),pa=t(e===null||e===void 0?void 0:e.addGenContentv3Opt,!1),wa=t(e===null||e===void 0?void 0:e.enable161Feats,!0),ba=t(e===null||e===void 0?void 0:e.enableAnsCardSuffix,!1),ka=t(e===null||e===void 0?void 0:e.isAdultUser,!0),da=t(e===null||e===void 0?void 0:e.isMissingDob,!0),ga=t(e===null||e===void 0?void 0:e.removeDSAT,!0),iu=t(e===null||e===void 0?void 0:e.enableErrorTelemetry,!1),ru=t(e===null||e===void 0?void 0:e.enableSpeechContinuousErrorHandling,!1),uu=t(e===null||e===void 0?void 0:e.enableSpeechChatDataAfterPhrase,!1),ii=t(e===null||e===void 0?void 0:e.enableSpeechEarconOnInput,!1),fu=t(e===null||e===void 0?void 0:e.enableTTSOnSuggestionAfterVoice,!1),nv=t(e===null||e===void 0?void 0:e.enableTTSNeverSetting,!1),tv=t(e===null||e===void 0?void 0:e.enableCustomizedTtsOptions,!1),hu=t(e===null||e===void 0?void 0:e.enableSimpleVoiceInput,!1),cu=t(e===null||e===void 0?void 0:e.enableSpeechDictationMode,!1),lu=t(e===null||e===void 0?void 0:e.enableAudioPreloadLimit,!1),au=t(e===null||e===void 0?void 0:e.enableSpeechFateTTSStop,!1),wu=t(e===null||e===void 0?void 0:e.enableSpeechGetUserMedia,!1),iv=t(e===null||e===void 0?void 0:e.enableSydCLOC,!1),rv=t(e===null||e===void 0?void 0:e.enableCdxFeats,!1),bu=t(e===null||e===void 0?void 0:e.cdxFeats,""),uv=t(e===null||e===void 0?void 0:e.disableSecureUpdateConversation,!1),fv=t(e===null||e===void 0?void 0:e.disableSecureSendFeedback,!1),ev=t(e===null||e===void 0?void 0:e.enableFdbkFinalized,!1),ov=t(e===null||e===void 0?void 0:e.enableSemSerpShare,!1),sv=t(e===null||e===void 0?void 0:e.enableCreatorShare,!1),hv=t(e===null||e===void 0?void 0:e.enableShareModalDialog,!1),ku=t(e===null||e===void 0?void 0:e.enableSydImageCreate,!1),cv=t(e===null||e===void 0?void 0:e.enableSecureConnect,!0),sf=t(e===null||e===void 0?void 0:e.enableInstanceAffinity,!1),hf=t(e===null||e===void 0?void 0:e.enableGetMessagesHub,!1),lv=t(e===null||e===void 0?void 0:e.enableShortOpt,!1),av=t(e===null||e===void 0?void 0:e.enablePuidOvr,!1),cf=t(e===null||e===void 0?void 0:e.enablePerfTrk,!1),vv=t(e===null||e===void 0?void 0:e.enableEmbeddedPerf,!1),af=t(e===null||e===void 0?void 0:e.enableSinglePerfEventPerMessage,!1),yv=t(e===null||e===void 0?void 0:e.enableE2EPerf,!1),pv=t(e===null||e===void 0?void 0:e.enableCCPPerf,!1),pf=t(e===null||e===void 0?void 0:e.enableUnauthRedir,!1),wf=t(e===null||e===void 0?void 0:e.enableNewChatIconInActionBar,!1),bf=t(e===null||e===void 0?void 0:e.enableActionBarV2,!1),ui=t(e===null||e===void 0?void 0:e.speechSurface,""),kf=t(e===null||e===void 0?void 0:e.enableSpeechDictationBridgeMode,!1),df=t(e===null||e===void 0?void 0:e.enableSpeculativeMode,!1),gf=t(e===null||e===void 0?void 0:e.enableReadAloudMessage,!1),ne=t(e===null||e===void 0?void 0:e.enableReadAloudOptions,!1),wv=t(e===null||e===void 0?void 0:e.bypassMicPermissionsQuery,!1),te=t(e===null||e===void 0?void 0:e.enableSpeechLanguageSetting,!1),re=t(e===null||e===void 0?void 0:e.enableSpeechAutoDetectLanguage,!1),bv=t(e===null||e===void 0?void 0:e.enableWhisperSR,!1),ue=t(e===null||e===void 0?void 0:e.enableSpeechLogNoiseReduction,!1),fe=t(e===null||e===void 0?void 0:e.enableAutoReopenMic,!1),ee=t(e===null||e===void 0?void 0:e.enableAccentedIconsOnMobileABV2,!1),oe=t(e===null||e===void 0?void 0:e.enableAltVoiceQuerySubmissionOnMobileABV2,!1),se=t((vt=_w._sydConvConfig)===null||vt===void 0?void 0:vt.enableMockMicListeningState,!1),he=t((yt=_w._sydConvConfig)===null||yt===void 0?void 0:yt.enableMockMicBlockedState,!1),ce=t(e===null||e===void 0?void 0:e.enableSpeechErrorHandling,!1),le=t(e===null||e===void 0?void 0:e.enableSpeechAriaLabel,!1),ae=t(e===null||e===void 0?void 0:e.enableSpeechReopenMic,!1),ve=t(e===null||e===void 0?void 0:e.enableSpeechTTSLatencyLogging,!1),ye=t(e===null||e===void 0?void 0:e.enableSpeechInputWhileRequestIsPending,!1),pe=t(e===null||e===void 0?void 0:e.enableSpeechIconDarkTheme,!1),kv=t(e===null||e===void 0?void 0:e.enableNewTopicAutoExpand,!1),dv=t(e===null||e===void 0?void 0:e.enableMaxTurnsPerConversation,!1),gv=t(e===null||e===void 0?void 0:e.enableAmberTurnPerConversation,!1),ny=t(e===null||e===void 0?void 0:e.maxMessageLength,yr),ty=t(e===null||e===void 0?void 0:e.isAccountLinkedWithActiveAAD,!1),iy=t(e===null||e===void 0?void 0:e.enableThreadsAADMSASwitch,!1),we=t(e===null||e===void 0?void 0:e.enableTelemetryPrivacy,!1),ry=t(e===null||e===void 0?void 0:e.enableSydSafeSearch,!1),uy=t(e===null||e===void 0?void 0:e.enableFeedbackClientSideScreenshot,!1),fy=t(e===null||e===void 0?void 0:e.enablePrivacyConsent,!0),ey=t(e===null||e===void 0?void 0:e.syntheticStreamSpeed,wt),oy=t(e===null||e===void 0?void 0:e.disableShareWithNoMargin,!1),sy=t(e===null||e===void 0?void 0:e.enableMobileShareAnchorBottom,!1),hy=t(e===null||e===void 0?void 0:e.enableCreativeLandingPage,!1),cy=t(e===null||e===void 0?void 0:e.enableServerLogMerging,!1),be=t(e===null||e===void 0?void 0:e.enableOneClickCopy,!1),ke=t(e===null||e===void 0?void 0:e.enableReorderCopiedTextReferences,!1),de=t(e===null||e===void 0?void 0:e.enableCodeCopy,!1),ge=t(e===null||e===void 0?void 0:e.enableCodeBar,!1),no=t(e===null||e===void 0?void 0:e.enableCodeBarV2,!1),ro=t(e===null||e===void 0?void 0:e.enableUserMessageCopy,!1),uo=t(e===null||e===void 0?void 0:e.enableRichTextPaste,!1),fo=t(e===null||e===void 0?void 0:e.enablePasteMarkdownTable,!1),eo=t(e===null||e===void 0?void 0:e.enablePasteMath,!1),ly=t(e===null||e===void 0?void 0:e.enableSkipContentOriginCheck,!1),ay=t(e===null||e===void 0?void 0:e.enableMobileOneClickShare,!1),vy=t(e===null||e===void 0?void 0:e.enableMobileOneClickShareV2,!1),yy=t(e===null||e===void 0?void 0:e.enableFeedbackInstrumentation,!1),py=t(e===null||e===void 0?void 0:e.enableSuggEndFix,!1),wy=t(e===null||e===void 0?void 0:e.enableAutoRecoverFromInvalidSession,!1),by=t(e===null||e===void 0?void 0:e.enableAutoRecoverFromInvalidSessionForFirstTurn,!1),ky=t(e===null||e===void 0?void 0:e.enableActionBarIMEFix,!1),dy=t(e===null||e===void 0?void 0:e.enableGhostTrailingSpaceByLanguage,!1),oo=t(e===null||e===void 0?void 0:e.enableInlineFeedback,!1),so=t(e===null||e===void 0?void 0:e.enableInlineFeedbackV2,!1),ho=t(e===null||e===void 0?void 0:e.enableInlineFeedbackV21,!1),co=t(e===null||e===void 0?void 0:e.enableSerpFeedback,!1),lo=t(e===null||e===void 0?void 0:e.enableMessageExport,!1),ao=t(e===null||e===void 0?void 0:e.enableMessageExportWithPlainText,!1),vo=t(e===null||e===void 0?void 0:e.enableHandoffAPI,!1),yo=t(e===null||e===void 0?void 0:e.enableMessageExportOnlineWord,!1),gy=t(e===null||e===void 0?void 0:e.enableMessageExportWord,!1),po=t(e===null||e===void 0?void 0:e.enableMessageExportOnlineExcel,!1),wo=t(e===null||e===void 0?void 0:e.enableMessageExportLocalExcel,!1),bo=t(e===null||e===void 0?void 0:e.enableTableBarFlatActions,!1),np=t(e===null||e===void 0?void 0:e.enableThreadExportLocalWord,!1),ko=t(e===null||e===void 0?void 0:e.enableThreadExportOnlineWord,!1),go=t(e===null||e===void 0?void 0:e.enableMessageExportV2,!1),ns=t(e===null||e===void 0?void 0:e.enableBotMessageActionsBar,!1),ts=t(e===null||e===void 0?void 0:e.enableShorterToastDuration,!1),is=t(e===null||e===void 0?void 0:e.enableDirectlyOpenExportOnlineLink,!1),rs=t(e===null||e===void 0?void 0:e.enableLoginHintForSSO,!1),yd=t(e===null||e===void 0?void 0:e.enableLimitToMsaOnlineExport,!1),pd=t(e===null||e===void 0?void 0:e.enableLimitToAadOnlineExport,!1),us=t(e===null||e===void 0?void 0:e.enableTonePreview,!1),fs=t(e===null||e===void 0?void 0:e.enableMSAuth1stPartyApp,!1),es=t(e===null||e===void 0?void 0:e.enableAdsRedirectLinkForTextMessage,!1),os=t(e===null||e===void 0?void 0:e.enableCopyHtml,!1),ss=t(e===null||e===void 0?void 0:e.enableCopyHtmlWithHighlightedCode,!1),hs=t(e===null||e===void 0?void 0:e.enableExportPdfWithAnswerScreenshot,!1),cs=t(e===null||e===void 0?void 0:e.enableExportDocxWithAnswerScreenshot,!1),ls=t(e===null||e===void 0?void 0:e.enableLibrariesSplitImport,!1),as=t(e===null||e===void 0?void 0:e.enableFlatActionBar,!1),vs=t(e===null||e===void 0?void 0:e.codexMUIDUser,!1),ys=t(e===null||e===void 0?void 0:e.enableChatIconClickable,!1),ps=t(e===null||e===void 0?void 0:e.enableChatQueryClickable,!1),ws=t(e===null||e===void 0?void 0:e.enableChatQueryClickableV2,!1),bs=t(e===null||e===void 0?void 0:e.enableChatQueryClickableV3,!1),ks=t(e===null||e===void 0?void 0:e.enableChatQueryClickableV4,!1),ds=t(e===null||e===void 0?void 0:e.enableShareQuestionWithResponse,!1),gs=t(e===null||e===void 0?void 0:e.enableDynamicShareTitle,!1),nh=t(e===null||e===void 0?void 0:e.enableShareQuestionTitlePrefix,!1),th=t(e===null||e===void 0?void 0:e.enableShareInlineAdsIframe,!1),ih=t(e===null||e===void 0?void 0:e.enableSharePreview,!1),rh=t(e===null||e===void 0?void 0:e.enableSharedHoverCitations,!1),uh=t(e===null||e===void 0?void 0:e.enableShowShareButtonWithSecurityCheck,!1),fh=t(e===null||e===void 0?void 0:e.enableScreenshotIgnoreOnCibSerp,!1),eh=t(e===null||e===void 0?void 0:e.enableStandaloneUtility,!1);n.enableCreatorSendQueryWhenShowConvQuery=t(e===null||e===void 0?void 0:e.enableCreatorSendQueryWhenShowConvQuery,!0);n.padding2TMobile=t(e===null||e===void 0?void 0:e.padding2TMobile,!0);ri=t(e===null||e===void 0?void 0:e.enableSetConvQueryFlag,!1);k=t((pt=_w._sydConvTranslation)===null||pt===void 0?void 0:pt.pageTitleText,"");d=document.title||"";l=a?ou:dt;n.enableConvModeSwitchAjax=t(e===null||e===void 0?void 0:e.enableConvModeSwitchAjax,!1);n.enableBingChatPath=t(e===null||e===void 0?void 0:e.enableBingChatPath,!1);var wd=t(e===null||e===void 0?void 0:e.enableCodexWin,!1),bd=t(e===null||e===void 0?void 0:e.enableCodexWinBotMessage,!1),kd=t(e===null||e===void 0?void 0:e.codexWinCurrentTurn,0),tp=t(e===null||e===void 0?void 0:e.enableGetChats,!1),ip=t(e===null||e===void 0?void 0:e.enableDelayGetChats,!1),oh=t(e===null||e===void 0?void 0:e.enableNewTables,!1),rp=t(e===null||e===void 0?void 0:e.codexTableVersion,1),sh=t(e===null||e===void 0?void 0:e.enableBufferMessage,!1),hh=t(e===null||e===void 0?void 0:e.enableBufferLoadingDots,!1),ch=t(e===null||e===void 0?void 0:e.enableServerMetaText,!1),lh=t(e===null||e===void 0?void 0:e.enableOptimizedStreaming,!1),up=t(e===null||e===void 0?void 0:e.enableExportDocxWithFormat,!1),fp=t(e===null||e===void 0?void 0:e.enableExportDocxWithTableFormat,!1),ep=t(e===null||e===void 0?void 0:e.enableDisposeOrphanedHosts,!1),op=t(e===null||e===void 0?void 0:e.enablePreserveTextFormat,!1),sp=t(e===null||e===void 0?void 0:e.enableHoverCardOnLearnMorePills,!1),hp=t(e===null||e===void 0?void 0:e.enableWowCDSSurvey,!1),ah=t(e===null||e===void 0?void 0:e.enableSydBeacon,!1),cp=t(e===null||e===void 0?void 0:e.enableShareOnHostMessage,!1),lp=t(e===null||e===void 0?void 0:e.disablePassBotGreetingInContext,!1),vh=t(e===null||e===void 0?void 0:e.enableThreadContextMenu,!1),ap=t(e===null||e===void 0?void 0:e.enableCloudflareCaptcha,!1),vp=t(e===null||e===void 0?void 0:e.enableInvisibleCaptchaChallenge,!1),yp=t(e===null||e===void 0?void 0:e.enableResizeObserverWithAnimationFrame,!1),pp=t(e===null||e===void 0?void 0:e.enableKnowledgeCardImage,!1),yh=t(e===null||e===void 0?void 0:e.enableStartPromotion,!1),wp=t(e===null||e===void 0?void 0:e.enableCopyButtonInstrumented,!1),bp=t(e===null||e===void 0?void 0:e.enableThreads,!1),kp=t(e===null||e===void 0?void 0:e.enableThreadSync,!1),dp=t(e===null||e===void 0?void 0:e.enableMobileKnowledgeCardOverlay,!1),gp=t(e===null||e===void 0?void 0:e.enableCibOverlayForKnowledgeCard,!1),nw=t(e===null||e===void 0?void 0:e.enableFlux3P,!1),tw=t(e===null||e===void 0?void 0:e.enablePluginsByTone,!1),dd=t(e===null||e===void 0?void 0:e.flux3PPluginList,""),ph=t(e===null||e===void 0?void 0:e.disableWelcomeScreen,!1),iw=t(e===null||e===void 0?void 0:e.enableWelcomeScreenV2,!1),rw=t(e===null||e===void 0?void 0:e.enableChatFRE,!1),wh=t(e===null||e===void 0?void 0:e.enableWebPageContextMessages,!1),uw=t(e===null||e===void 0?void 0:e.enableCodexPluginb,!1),fw=t(e===null||e===void 0?void 0:e.enableNewAutoSuggestEndPoint,!1),ew=t(e===null||e===void 0?void 0:e.enable2TQueryConfigsOnSerpLoad,!1),ow=t(e===null||e===void 0?void 0:e.enableSydStaticAdsLink,!1),sw=t(e===null||e===void 0?void 0:e.isMobileHost,!1),hw=t(e===null||e===void 0?void 0:e.enableRenderCardRequestIMSearchParams,!1),bh=t(e===null||e===void 0?void 0:e.enableMessagePrivacy,!1),kh=t(e===null||e===void 0?void 0:e.enableCloseShareOnClickOutside,!1),cw=t(e===null||e===void 0?void 0:e.enableTypingIndicatorForSerpSlotCreator,!1),lw=t(e===null||e===void 0?void 0:e.enableOnProcessingStartEvent,!1),aw=t(e===null||e===void 0?void 0:e.enableOnProcessingCompleteEvent,!1),dh=t(e===null||e===void 0?void 0:e.enableUpdateProfile,!1),vw=t(e===null||e===void 0?void 0:e.enableTypewriter,!1),gh=t(e===null||e===void 0?void 0:e.sydRequestSource,""),yw=t(e===null||e===void 0?void 0:e.enableConfirmPromptSingleDeleteThread,!1),pw=!t(e===null||e===void 0?void 0:e.disableTooltip,!1),ww=t(e===null||e===void 0?void 0:e.enableNewlineTooltip,!1),bw=t(e===null||e===void 0?void 0:e.enableDeferredImageCreatorCard,!1),kw=t(e===null||e===void 0?void 0:e.enableSaharaStream,!1),dw=t(e===null||e===void 0?void 0:e.enableFaviconsV2,!1),gw=t(e===null||e===void 0?void 0:e.enableFaviconsAutoRefresh,!1),nb=t(e===null||e===void 0?void 0:e.enableCachedContentFixForIsStartOfSession,!1),tb=t(e===null||e===void 0?void 0:e.enableUserIpAddress,!1),ib=t(e===null||e===void 0?void 0:e.enableLooseMessageDensity,!1),nc=t(e===null||e===void 0?void 0:e.enableSuggestionItemEnterAnimation,!1),tc=t(e===null||e===void 0?void 0:e.enableKatexScroll,!1),rb=t(e===null||e===void 0?void 0:e.enableLinkPreviewCarousel,!1),ub=t(e===null||e===void 0?void 0:e.useFakeDataForLinkPreviewCarousel,!1),ic=t(e===null||e===void 0?void 0:e.enablePageHeaderOverlapClamping,!1),fb=t(e===null||e===void 0?void 0:e.enableThreadShowPlugins,!1),eb=t(e===null||e===void 0?void 0:e.enableUpdateUserMessageId,!1),ob=t(e===null||e===void 0?void 0:e.enableUserMessageIdConsistency,!1),sb=t(e===null||e===void 0?void 0:e.enablePluginPanelFre,!1),hb=t(e===null||e===void 0?void 0:e.enablePersistentInputText,!1),rc=t(e===null||e===void 0?void 0:e.enableEmptyThreadTime,!1),cb=t(e===null||e===void 0?void 0:e.enableRenderIframeCardRequest,!1),uc=t(e===null||e===void 0?void 0:e.enableBackendExportService,!1),lb=t(e===null||e===void 0?void 0:e.enableFastChatLoadAnimation,!1),ab=t(e===null||e===void 0?void 0:e.enableShareInThreadsHeader,!0),gd=t(e===null||e===void 0?void 0:e.enableExternalSpeechIconAnimation,!1),vb=t(e===null||e===void 0?void 0:e.enableNewConversationActivate,!1),fc=t(e===null||e===void 0?void 0:e.enableInPrivateUserMode,!1),yb=t(e===null||e===void 0?void 0:e.enableMobileFirstClickShare,!1),ec=t(e===null||e===void 0?void 0:e.enableSydneyGetMessagesHub,!1),pb=t(e===null||e===void 0?void 0:e.enableInlinePersonalizationConsent,!1),wb=t(e===null||e===void 0?void 0:e.personalizationInlineConsentTurn,vr),oc=t(e===null||e===void 0?void 0:e.enableEduStarterMessage,!1),bb=t(e===null||e===void 0?void 0:e.enableEduStarterMessageAnimation,!1),kb=t(e===null||e===void 0?void 0:e.enablePhonePlugin,!1),db=t(e===null||e===void 0?void 0:e.enablePhonePluginDogfoodEnvironment,!1),gb=t(e===null||e===void 0?void 0:e.enablePhonePluginBetaEnvironment,!1),nk=t(e===null||e===void 0?void 0:e.enablePhonePluginProductionEnvironment,!1),tk=t(e===null||e===void 0?void 0:e.disablePhonePluginInPreciseTone,!1),ik=t(e===null||e===void 0?void 0:e.disablePhonePluginInBalancedTone,!1),rk=t(e===null||e===void 0?void 0:e.disablePhonePluginInCreativeTone,!1),uk=t(e===null||e===void 0?void 0:e.enableDonationPlugin,!1),fk=t(e===null||e===void 0?void 0:e.enableDonationPluginDogfood,!1),ek=t(e===null||e===void 0?void 0:e.enableDonationPluginProd,!1),ok=t(e===null||e===void 0?void 0:e.enableAdaptiveCardMessage,!1),sc=t(e===null||e===void 0?void 0:e.enableVersionedApiCalls,!1),hc=t(e===null||e===void 0?void 0:e.enableJWTFTRFix,!1),sk=t(e===null||e===void 0?void 0:e.enablePaywallTelemetryFix,!1),hk=t(e===null||e===void 0?void 0:e.enableNoBingSearchResponseBackground,!1),ck=t(e===null||e===void 0?void 0:e.enableNoSearchPluginMetaMessage,!1),cc=t(e===null||e===void 0?void 0:e.enableOpenEdgeNotification,!1),lc=t(e===null||e===void 0?void 0:e.enableSuppressSigninMessage,!1),ac=t(e===null||e===void 0?void 0:e.enableExportPdfWithRichFormat,!1),vc=t(e===null||e===void 0?void 0:e.enableAttributionImages,!1),yc=t(e===null||e===void 0?void 0:e.enableAttributionImagesWhenAdsPresent,!1),pc=t(e===null||e===void 0?void 0:e.enableAttributionImagesCarousel,!1),wc=t(e===null||e===void 0?void 0:e.enableAttributionImagesClickthrough,!1),lk=t(e===null||e===void 0?void 0:e.enableThreadsConsent,!1),bc=t(e===null||e===void 0?void 0:e.enableDeleteSingleConversationMemory,!1),ak=t(e===null||e===void 0?void 0:e.enableNoScrollDownOnInit,!1),vk=t(e===null||e===void 0?void 0:e.enableRelativeSignInUrl,!1),yk=t(e===null||e===void 0?void 0:e.enableThreadsTopRightButton,!1),pk=t(e===null||e===void 0?void 0:e.enablePluginsTopRightButton,!1),kc=t(e===null||e===void 0?void 0:e.enableOneDs,!1),wk=t(e===null||e===void 0?void 0:e.enableSydneyFSCTranslationSrc,!1),bk=t(e===null||e===void 0?void 0:e.enableBceMuidConsent,!1),kk=t(e===null||e===void 0?void 0:e.enableBfbCookieConsent,!1),dc=t(e===null||e===void 0?void 0:e.enableThreadContextMenuV2,!1),gc=t(e===null||e===void 0?void 0:e.enableSearchBoxAutoFocus,!1),nl=t(e===null||e===void 0?void 0:e.enableUserMessageRewriteInsteadOfCopy,!1),tl=t(e===null||e===void 0?void 0:e.enableUserMessageRewriteAndCopy,!1),il=t(e===null||e===void 0?void 0:e.enableSearchUserMessageOnBing,!1),rl=t(e===null||e===void 0?void 0:e.enableEditLastUserMessage,!1),ul=t(e===null||e===void 0?void 0:e.enableHideLastUserMessageInEdit,!1),fl=t(e===null||e===void 0?void 0:e.enablePrivateThreadDefaultTitle,!1),el=t(e===null||e===void 0?void 0:e.enablePromptHandling,!1),dk=t(e===null||e===void 0?void 0:e.enableU18Scenario,!1),gk=t(e===null||e===void 0?void 0:e.isCCP,!1),nd=t(e===null||e===void 0?void 0:e.enablePluginDevTools,!1),ol=t(e===null||e===void 0?void 0:e.enableModeAndSlotValidationForAds,!1),td=t(e===null||e===void 0?void 0:e.enableLogNoChatVariant,!1),id=t(e===null||e===void 0?void 0:e.enableVersionPrompt,!1),rd=t(e===null||e===void 0?void 0:e.enableAttributionsV2,!1),ud=t(e===null||e===void 0?void 0:e.enableLearnMoreCards,!1),sl=t(e===null||e===void 0?void 0:e.enableInlineComponents,!1),hl=t(e===null||e===void 0?void 0:e.enableSuggestionChipDisplayText,!1),fd=t(e===null||e===void 0?void 0:e.enableLinkPreviewFailureTelemetry,!1),ed=t(e===null||e===void 0?void 0:e.enableLinkPreviewAppIdV2,!1),fi=t(e===null||e===void 0?void 0:e.enableWpFluxTwoTAnswerCard,!1),cl=t(e===null||e===void 0?void 0:e.disableWpFluxTwoTAnswerCardFallback,!1),od=t(e===null||e===void 0?void 0:e.enableBICRelativeBaseUrl,!1),ll=t(e===null||e===void 0?void 0:e.isCopilotChat,!1),ng=t(e===null||e===void 0?void 0:e.enableBopCustomGreeting,!1),al=t(e===null||e===void 0?void 0:e.enableBufferClearOnReset,!1),vl=t(e===null||e===void 0?void 0:e.enableCancelPendingRequestOnNewMessage,!1),sd=t(e===null||e===void 0?void 0:e.enablePluginChatModeOnly,!1),yl=t(e===null||e===void 0?void 0:e.disableTitlePreviewLabel,!1),pl=t(e===null||e===void 0?void 0:e.disableTurnCount,!1),hd=t(e===null||e===void 0?void 0:e.enableBingProxyApiForSingleDeleteInThreads,!1);si=n.getConfigOrDefault((bt=_w._sydConvConfig)===null||bt===void 0?void 0:bt.extraNotebookOptionsSets,"");var cd=t(e===null||e===void 0?void 0:e.enableSilentUpdateConversationFail,!1),wl=t(e===null||e===void 0?void 0:e.enableGraphicArtJsonResponse,!1),ld=t(e===null||e===void 0?void 0:e.enableInlineTwoTAnswer,!1),ad=t(e===null||e===void 0?void 0:e.enableFreeSydney,!1),vd=t(e===null||e===void 0?void 0:e.isBingUserSignedIn,!1);if(ci(),gk&&u(r.System,"isCCP","Codex"),gh&&(CIB.config.sydney.request.source=gh),ei=t(e===null||e===void 0?void 0:e.enableFixOnReplaceAllJSError,!1),g=t(e===null||e===void 0?void 0:e.enableNotebookMode,!1),g&&(CIB.config.features.enableNotebookMode=g,ot=(kt=CIB.config.sydney.request.optionsSets)===null||kt===void 0?void 0:kt.slice(0),hi=si.split(",")),fc&&(CIB.config.features.enableInPrivateUserMode=fc),ll&&(CIB.config.bingAtWork.feedback.disableNonCompliantSerpFeedback=!0,tu&&(CIB.config.share.baseUrl=window.location.origin)),ak&&(CIB.config.features.enableNoScrollDownOnInit=!0),vk&&(CIB.config.bing.signIn.baseUrl=window.location.origin),sj_evt.bind("showSydFSC",li),hp&&(CIB.config.features.enableWowCDSSurvey=!0),ib&&(CIB.config.messaging.messageDensity="loose"),nc&&(CIB.config.features.enableSuggestionItemEnterAnimation=nc),tc&&(CIB.config.features.enableKatexScroll=tc),od&&(CIB.config.contentCreator.baseUrl=window.location.origin),CIB.config.features.enableVersionPrompt=id,CIB.config.features.enableAttributionsV2=rd,CIB.config.features.enableLearnMoreCards=ud,CIB.config.features.enableInlineTwoTAnswer=ld,bl=_ge("cib-design-tokens"),bl||CIB.activateDesignTokens(),o={},ir&&(o.country=ir),ur&&(o.state=ur),fr&&(o.city=fr),or&&(o.zipcode=or),ta||b?o.timezoneoffset=-((new Date).getTimezoneOffset()/60):sr&&(o.timezoneoffset=parseFloat(sr)),hr&&(o.dma=hr),ar&&(o.latitude=parseFloat(ar)),pr&&(o.longitude=parseFloat(pr)),rr&&(o.countryConfidence=rr),er&&(o.cityConfidence=er),b?(oi=Intl.DateTimeFormat().resolvedOptions().timeZone,oi&&(o.timezone=oi),CIB.config.sydney.message.locationInfo=o):i&&typeof i.locations!="undefined"&&typeof i.locations.locationsList!="undefined"?typeof SydneyFSCLocationHelper!="undefined"&&typeof SydneyFSCLocationHelper.writeToLocationHints!="undefined"&&SydneyFSCLocationHelper.writeToLocationHints(i):i&&typeof i.cookLoc!="undefined"?(h=[],i.cookLoc.userLoc&&(y=ct(i.cookLoc.userLoc,!1),y.RegionType=1,y.SourceType=2,y.FDConfidence=1,h.push(y)),i.cookLoc.deviceLoc&&(nt=ct(i.cookLoc.deviceLoc,!1),nt.RegionType=2,nt.SourceType=5,h.push(nt)),iv&&i.cookLoc.coarseLoc&&(tt=ct(i.cookLoc.coarseLoc,!1),tt.RegionType=2,tt.SourceType=11,h.push(tt)),s=o,s.Center={Latitude:s.latitude,Longitude:s.longitude},delete s.latitude,delete s.longitude,s.RegionType=2,s.SourceType=1,h.push(s),CIB.config.sydney.message.locationHints=h):CIB.config.sydney.message.locationinfo=o,tb&&(CIB.config.sydney.message.userIpAddress=ia),CIB.config.sydney.message.timestamp=ie(),wk?sj_evt.bind("sydConvTranslationLoaded",yi,!0):pi(la),sc&&(CIB.config.features.enableVersionedApiCalls=sc),hc&&(CIB.config.features.enableJWTFTRFix=hc),tp&&(CIB.config.features.enableGetChats=!0),ip&&(CIB.config.features.enableDelayGetChats=!0),kp&&(CIB.config.features.enableThreadSync=!0),vw&&(CIB.config.features.enableTypewriterEffectForThreadName=!0),kw&&(CIB.config.features.enableSaharaSyntheticStreaming=!0),dw&&(CIB.config.features.enableFaviconV2=!0),gw&&(CIB.config.features.enableFaviconAutoRefresh=!0),nb&&(CIB.config.features.enableCachedContentFixForIsStartOfSession=!0),cd&&(CIB.config.features.enableSilentUpdateConversationFail=!0),CIB.config.features.enableBingProxyApiForSingleDeleteInThreads=hd,bp&&nw&&(CIB.config.features.enableFlux3P=!0,typeof CIB.config.plugin=="undefined"&&(CIB.config.plugin={}),sd&&(CIB.config.features.enablePluginOptionSetsConversationModeOnly=!0),hk&&(CIB.config.features.enableNoBingSearchResponseBackground=!0),ck&&(CIB.config.features.enableNoSearchPluginMetaMessage=!0),fb&&(CIB.config.features.enableThreadShowPlugins=!0),sb&&(CIB.config.features.enablePluginPanelFre=!0),rb&&(CIB.config.features.enableLinkPreviewCarousel=!0)),fd&&(CIB.config.features.enableLinkPreviewFailureTelemetry=!0),ed&&(CIB.config.features.enableLinkPreviewAppIdV2=!0),pb&&(CIB.config.features.enableInlinePersonalizationConsent=!0,CIB.config.messaging.personalizationInlineConsentTurn=wb),tw&&(CIB.config.features.enablePluginsByTone=!0),nd&&(CIB.config.features.enablePluginDevTools=!0),yw&&(CIB.config.features.enableConfirmPromptForDeleteSingleThread=!0),bw&&(CIB.config.features.enableDeferredImageCreatorCard=!0),uw&&(CIB.config.features.enableOpenTableBookBlueLink=!0),hw&&(CIB.config.features.enableRenderCardRequestIMSearchParams=!0),ub&&(CIB.config.features.useFakeDataForLinkPreviewCarousel=!0),eb&&(CIB.config.features.enableUpdateUserMessageId=!0),ob&&(CIB.config.features.enableUserMessageIdConsistency=!0),cb&&(CIB.config.features.enableRenderIframeCardRequest=!0),oc&&(CIB.config.features.enableFreEducationalStarter=!0),bb&&(CIB.config.features.enableFreEducationalStarterAnimation=!0),kb&&(CIB.config.features.enablePhonePlugin=!0),nk&&(CIB.config.features.enablePhonePluginProductionEnvironment=!0),gb&&(CIB.config.features.enablePhonePluginBetaEnvironment=!0),db&&(CIB.config.features.enablePhonePluginDogfoodEnvironment=!0),tk&&(CIB.config.features.disablePhonePluginInPreciseTone=!0),ik&&(CIB.config.features.disablePhonePluginInBalancedTone=!0),rk&&(CIB.config.features.disablePhonePluginInCreativeTone=!0),uk&&(CIB.config.features.enableDonationPlugin=!0),fk&&(CIB.config.features.enableDonationPluginDogfood=!0),ek&&(CIB.config.features.enableDonationPluginProd=!0),ok&&(CIB.config.features.enableAdaptiveCardMessage=!0),ai=new URLSearchParams(_w.location.search),vi=ai.get(lr.toLowerCase()),(br!=""||ni&&vi)&&(v=CIB.config.speech.srOptions?CIB.config.speech.srOptions:[],v=c(v,br),ni&&(v=c(v,vi)),CIB.config.speech.srOptions=v),ii&&(CIB.config.speech.srOptions||(CIB.config.speech.srOptions=[]),CIB.config.speech.srOptions.push("earcon")),ui&&(CIB.config.speech.query.surface=ui,CIB.config.speech.surface=ui),re&&(it=sj_cook===null||sj_cook===void 0?void 0:sj_cook.get(n.userCook,su),it&&it!="1"?it=="0"&&(CIB.config.speech.query.autodetect="0"):(CIB.config.speech.query.autodetect="1",CIB.config.features.enableSpeechAutoDetectLanguage=re,CIB.config.speech.srOptions||(CIB.config.speech.srOptions=[]),CIB.config.speech.srOptions.push("cdxdlid"),CIB.config.speech.srOptions.push("autotts"))),bv&&(CIB.config.speech.srOptions||(CIB.config.speech.srOptions=[]),CIB.config.speech.srOptions.push("cdxwhisr")),CIB.config.sydney.isAdultUser=da?null:ka,ga&&(bi=CIB.config.sydney.request.optionsSets.indexOf("enable_debug_commands"),bi>=0&&CIB.config.sydney.request.optionsSets.splice(bi,1)),ya&&f(CIB.config.sydney.request.optionsSets,"dv3sugg"),pa&&f(CIB.config.sydney.request.optionsSets,"gencontentv3"),lv&&f(CIB.config.sydney.request.optionsSets,"prodshortv4"),ra&&wr!=""&&(CIB.config.sydney.request.optionsSets=c([],wr)),rv){if(bu)for(ut=bu.split(","),et=0,ki=ut;et<ki.length;et++)p=ki[et],CIB.config.features[p]=!0;if(di=ai.get(cr.toLowerCase()),ni&&di)for(ut=di.split(","),st=0,gi=ut;st<gi.length;st++)p=gi[st],p.indexOf(":")>=0&&(ht=p.split(":"),ht.length==2&&(CIB.config.features[ht[0]]=ht[1]))}if(gr&&(kl=gr.split(","),CIB.config.sydney.request.sliceIds=kl),CIB.config.bing.isVisualParityRun=ea,CIB.config.bing.isMSAAuthenticated=oa,CIB.config.bing.userMailId=sa,CIB.config.bing.username=ha,dr&&(CIB.config.sydney.baseUrl=dr),kr!=""&&(CIB.config.sydney.pathBase=kr),nv&&(nr=sj_cook.get(n.userCook,gt),nr&&nr=="0"&&(CIB.config.features.enableTTSOnVoiceInput=!1)),tv&&(CIB.config.features.enableCustomizedTtsOptions=!0,dl=sj_cook.get(n.userCook,eu),tr=parseInt(dl),tr&&(CIB.config.speech.ttsOptions=__assign(__assign({},CIB.config.speech.ttsOptions),{speed:tr}))),ru&&(CIB.config.features.enableSpeechContinuousErrorHandling=ru),uu&&(CIB.config.features.enableSpeechChatDataAfterPhrase=uu),ii&&(CIB.config.features.enableSpeechEarconOnInput=ii),fu&&(CIB.config.features.enableTTSOnSuggestionAfterVoice=fu),hu&&(CIB.config.features.enableSimpleVoiceInput=hu),cu&&(CIB.config.features.enableSpeechDictationMode=cu),lu&&(CIB.config.features.enableAudioPreloadLimit=lu),au&&(CIB.config.features.enableSpeechFateTTSStop=au),wu&&(CIB.config.features.enableSpeechGetUserMedia=wu),ce&&(CIB.config.features.enableSpeechErrorHandling=ce),ve&&(CIB.config.features.enableSpeechTTSLatencyLogging=ve),ye&&(CIB.config.features.enableSpeechInputWhileRequestIsPending=ye),pe&&(CIB.config.features.enableSpeechIconDarkTheme=pe),le&&(CIB.config.features.enableSpeechAriaLabel=le),ae&&(CIB.config.features.enableAutoReopenMic=ae),fa&&SydneySuperAppConnector&&(CIB.config.speech.textToSpeechProvider=SydneySuperAppConnector.getTextToSpeechProvider),du(),ys&&(CIB.config.features.enableChatIconClickable=ys),ps&&(CIB.config.features.enableChatQueryClickable=ps),ws&&(CIB.config.features.enableChatQueryClickableV2=ws),bs&&(CIB.config.features.enableChatQueryClickableV3=bs),ks&&(CIB.config.features.enableChatQueryClickableV4=ks),ds&&(CIB.config.features.enableShareQuestionWithResponse=ds),gs&&(CIB.config.features.enableDynamicShareTitle=gs),nh&&(CIB.config.features.enableShareQuestionTitlePrefix=nh),th&&(CIB.config.features.enableShareInlineAdsIframe=th),ih&&(CIB.config.features.enableSharePreview=ih),rh&&(CIB.config.features.enableSharedHoverCitations=rh),fh&&(CIB.config.features.enableScreenshotIgnoreOnCibSerp=fh),eh&&(CIB.config.features.enableStandaloneUtility=eh),CIB.config.speech.animationProvider=function(){var n=location.origin+"/CodexAnimations/animations.json";return na.getJsonData(n)},ua&&(CIB.config.features.enableMetaMessages=!1,CIB.config.features.enableLearnMore=!1,CIB.config.features.enableCitations=!1,CIB.config.features.enableWelcomeScreen=!1,CIB.config.features.enableShare=!1,CIB.config.features.enableStopButton=!1,CIB.config.features.enableAnswerCards=!1,CIB.config.features.enableAds=!1),nu&&(CIB.config.sydney.request.traceId=nu),CIB.config.features.enableSpeechInput=aa,CIB.config.features.enableShare=tu,CIB.config.features.enableMessageShareableSignalV2=va,wa&&(CIB.config.features.enableErrorStateNotification=!0,CIB.config.features.enableErrorStateToastNotificationResetButton=!0,CIB.config.features.enableGhostedAutoSuggest=!0,CIB.config.features.enableHoverCardAttributionFavicons=!0),wy&&(CIB.config.features.enableAutoRecoverFromInvalidSession=!0),by&&(CIB.config.features.enableAutoRecoverFromInvalidSessionForFirstTurn=!0),ky&&(CIB.config.features.enableActionBarIMEFix=!0),dy&&(CIB.config.features.enableGhostTrailingSpaceByLanguage=!0),iu&&(CIB.config.features.enableErrorInstrumentaton=iu),ku&&(CIB.config.features.enableSydImageCreate=ku),sl&&(CIB.config.features.enableInlineComponents=sl),pu(),gu(),yu(),ba&&(CIB.config.features.enableAnsCardSfx=!0),uy&&(CIB.config.features.enableFeedbackClientSideScreenshot=!0),fy&&(vs||ti&&(kk||bk)?vu():g&&(CIB.config.features.enablePrivacyConsentFormNonMuid=!0,wi())),ep&&(CIB.config.features.enableDisposeOrphanedHosts=!0),op&&(CIB.config.features.enablePreserveTextFormat=!0),sp&&(CIB.config.features.enableHoverCardOnLearnMorePills=!0),ap&&(CIB.config.features.enableCloudflareCaptcha=!0),vp&&(CIB.config.features.enableInvisibleCaptchaChallenge=!0),yp&&(CIB.config.features.enableResizeObserverWithAnimationFrame=!0),up&&(CIB.config.features.enableExportDocxWithFormat=!0),fp&&(CIB.config.features.enableExportDocxWithTableFormat=!0),sk&&(CIB.config.features.enablePaywallTelemetryFix=!0),CIB.config.features.enableSecureUpdateConversation=!uv,CIB.config.features.enableSecureSendFeedback=!fv,CIB.config.features.enableShareSemSerp=ov,CIB.config.features.enableShareCreator=sv,CIB.config.features.enableFeedbackOnFinalized=ev,CIB.config.features.enableShareWithNoMargin=!oy,CIB.config.features.enableMobileShareAnchorBottom=sy,CIB.config.features.enableCreativeLandingPage=hy,CIB.config.features.enableServerLogMerging=cy,CIB.config.features.enableSkipContentOriginValidation=ly,CIB.config.features.enableMobileOneClickShare=ay,CIB.config.features.enableMobileOneClickShareV2=vy,CIB.config.features.enableFeedbackInstrumentation=yy,CIB.config.features.enableCopyButtonInstrumented=wp,CIB.config.features.enableShareModalDialog=hv,CIB.config.features.enableShareOnHostMessage=cp,CIB.config.features.enablePassBotGreetingInContext=!lp,CIB.config.features.enableMobileKnowledgeCardOverlay=dp,CIB.config.features.enableCibOverlayForKnowledgeCard=gp,CIB.config.features.enableNewAutoSuggestEndPoint=fw,CIB.config.features.enableNewTopicTooltip=pw,CIB.config.features.enableNewlineTooltip=ww,CIB.config.features.enableTypingIndicatorForSerpSlotCreator=cw,CIB.config.features.enableOnProcessingStartEvent=lw,CIB.config.features.enableOnProcessingCompleteEvent=aw,CIB.config.messaging.maxMessageLength=ny,CIB.config.features.enableThreadsAadMsaSwitch=iy,CIB.config.messaging.isAccountLinkedAadUser=ty,CIB.config.features.enableFastChatLoadAnimation=lb,CIB.config.features.enableShareInThreadsHeader=ab,CIB.config.features.enableNewConversationActivate=vb,CIB.config.features.enableMobileFirstClickShare=yb,CIB.config.features.enableThreadsTopRightButton=yk,CIB.config.features.enablePluginsTopRightButton=pk,(iw||rw)&&(CIB.config.features.enableWelcomeScreen=ph,CIB.config.features.enableWelcomeScreenItem=!ph),oc&&SydWelcomeScreen.isEduStarterEnabled()&&(CIB.config.features.enableWelcomeScreen=!0,CIB.config.features.enableWelcomeScreenItem=!0),pp&&(CIB.config.features.enableKnowledgeCardImage=!0,CIB.config.features.enableImagesInTextMessages=!0,to()),CIB.config.features.secureConversation=cv,sf&&(CIB.config.features.enableAffinityInstance=sf,f(CIB.config.sydney.request.optionsSets,"machine_affinity"),f(CIB.config.sydney.request.optionsSets,"streamf")),hf&&(CIB.config.features.enableGetMessagesHub=hf),kv&&(CIB.config.features.enableNewTopicAutoExpand=!0),gv&&(CIB.config.features.enableAmberTurnPerConversation=!0,CIB.config.messaging.amberTurnPerConversation=t(e===null||e===void 0?void 0:e.amberTurnPerConversation,0)),dv&&(CIB.config.features.enableMaxTurnsPerConversation=!0,CIB.config.features.enableMaxTurnsFromBackend=t(e===null||e===void 0?void 0:e.enableMaxTurnsFromBackend,!1),CIB.config.messaging.maxTurnsPerConversation=vs?t(e===null||e===void 0?void 0:e.maxTurnsPerConversationMuidUser,rt):t(e===null||e===void 0?void 0:e.maxTurnsPerConversation,rt)),av&&(CIB.config.sydney.request.Participant={Id:"1"}),cf&&(CIB.config.features.enablePerfTracker=cf),vv&&(CIB.config.features.enableEmbeddedPerf=!0),af&&(CIB.config.features.enableSinglePerfEventPerMessage=af),yv&&(CIB.config.features.enableE2EPerf=!0),pv&&(CIB.config.features.enableCCPPerf=!0),pf&&(CIB.config.features.enableRedirectToLoginUrl=pf),wf&&(CIB.config.features.enableNewChatIconInActionBar=wf),bf&&(CIB.config.features.enableActionBarV2=bf),kf&&(CIB.config.features.enableSpeechDictationBridgeMode=kf),df&&(CIB.config.features.enableSpeculativeMode=df),gf&&(CIB.config.features.enableReadAloudMessage=gf),ne&&(CIB.config.features.enableReadAloudOptions=ne,lt=parseInt(sj_cook.get(n.userCook,gt)),lt>=0&&lt<=2&&(CIB.config.speech.ttsOption=__assign(__assign({},CIB.config.speech.ttsOption),{readAloud:lt}))),te&&(CIB.config.features.enableSpeechLanguageSetting=te),ue&&(CIB.config.features.enableSpeechLogNoiseReduction=ue),fe&&(CIB.config.features.enableAutoReopenMic=fe),ee&&(CIB.config.features.enableAccentedIconsOnMobileABV2=ee),oe&&(CIB.config.features.enableAltVoiceQuerySubmissionOnMobileABV2=oe),se&&(CIB.config.features.enableMockMicListeningState=se),he&&(CIB.config.features.enableMockMicBlockedState=he),wv&&(CIB.config.speech.micPermissionProvider=function(){return{}}),ry&&(CIB.config.features.enableSafeSearchSetting=!0,lf()),CIB.config.messaging.messageBufferWorkerStreamDelayMS=ey,py&&(CIB.config.suggestions.baseUrl="https://www.bing.com"),be&&(CIB.config.features.enableOneClickCopy=be),ke&&(CIB.config.features.enableReorderCopiedTextReferences=ke),de&&(CIB.config.features.enableCodeCopy=de),ge&&(CIB.config.features.enableCodeBar=ge),no&&(CIB.config.features.enableCodeBarV2=no),ro&&(CIB.config.features.enableUserMessageCopy=ro),uo&&(CIB.config.features.enableRichTextPaste=uo),fo&&(CIB.config.features.enablePasteMarkdownTable=fo),eo&&(CIB.config.features.enablePasteMath=eo),oo&&(CIB.config.features.enableInlineFeedback=oo),so&&(CIB.config.features.enableInlineFeedbackV2=so),ho&&(CIB.config.features.enableInlineFeedbackV21=ho),co&&(CIB.config.features.enableSerpFeedback=co),lo&&(CIB.config.features.enableMessageExport=lo),ao&&(CIB.config.features.enableMessageExportWithPlainText=ao),vo&&(CIB.config.features.enableHandoffAPI=vo),yo&&(CIB.config.features.enableMessageExportOnlineWord=yo),po&&(CIB.config.features.enableMessageExportOnlineExcel=po),us&&(CIB.config.features.enableTonePreview=us),yl&&(CIB.config.features.disableTitlePreviewLabel=yl),pl&&(CIB.config.features.disableTurnCount=pl),CIB.config.features.enableMessageExportWord=gy,CIB.config.features.enableThreadExportLocalWord=np,wo&&(CIB.config.features.enableMessageExportLocalExcel=wo),bo&&(CIB.config.features.enableTableBarFlatActions=bo),ko&&(CIB.config.features.enableThreadExportOnlineWord=ko),go&&(CIB.config.features.enableMessageExportV2=go),ns&&(CIB.config.features.enableBotMessageActionsBar=ns),ts&&(CIB.config.features.enableShorterToastDuration=ts),is&&(CIB.config.features.enableDirectlyOpenExportOnlineLink=is),rs&&(CIB.config.features.enableLoginHintForSSO=rs),fs&&(CIB.config.features.enableMSAuth1stPartyApp=fs),es&&(CIB.config.features.enableAdsRedirectLinkForTextMessage=es),os&&(CIB.config.features.enableCopyHtml=os),ss&&(CIB.config.features.enableCopyHtmlWithHighlightedCode=ss),hs&&(CIB.config.features.enableExportPdfWithAnswerScreenshot=hs),cs&&(CIB.config.features.enableExportDocxWithAnswerScreenshot=cs),ls&&(CIB.config.features.enableLibrariesSplitImport=ls),as&&(CIB.config.features.enableFlatActionBar=as),ah&&(CIB.config.features.enableSydBeacon=ah),yh&&(CIB.config.features.enableStartPromotion=yh),vh&&(CIB.config.features.enableThreadContextMenu=vh),oh&&(CIB.config.features.enableNewTables=oh,CIB.config.messaging.tableVersion=rp),sh&&(CIB.config.features.enableBufferMessage=sh),hh&&(CIB.config.features.enableBufferLoadingDots=hh),ch&&(CIB.config.features.enableServerMetaText=ch),bh&&(CIB.config.features.enableMessagePrivacy=bh),kh&&(CIB.config.features.enableCloseShareOnClickOutside=kh),uh&&(CIB.config.features.enableShowShareButtonWithSecurityCheck=uh),lh&&(CIB.config.features.enableOptimizedStreaming=lh),ec&&(CIB.config.features.enableSydneyGetMessagesHub=ec),dh&&(CIB.config.features.enableUpdateProfile=dh),lc&&(CIB.config.features.enableSuppressSigninMessage=lc),cc&&(CIB.config.features.enableOpenEdgeNotification=cc),ac&&(CIB.config.features.enableExportPdfWithRichFormat=ac),vc&&(CIB.config.features.enableAttributionImages=vc),yc&&(CIB.config.features.enableAttributionImagesWhenAdsPresent=yc),pc&&(CIB.config.features.enableAttributionImagesCarousel=pc),wc&&(CIB.config.features.enableAttributionImagesClickthrough=wc),dc&&(CIB.config.features.enableThreadContextMenuV2=dc),gc&&(CIB.config.features.enableSearchBoxAutoFocus=gc),nl&&(CIB.config.features.enableUserMessageRewriteInsteadOfCopy=nl),tl&&(CIB.config.features.enableUserMessageRewriteAndCopy=tl),il&&(CIB.config.features.enableSearchUserMessageOnBing=il),rl&&(CIB.config.features.enableEditLastUserMessage=rl),ul&&(CIB.config.features.enableHideLastUserMessageInEdit=ul),ei&&(CIB.config.features.enableFixOnReplaceAllJSError=ei),al&&(CIB.config.features.enableBufferClearOnReset=al),vl&&(CIB.config.features.enableCancelPendingRequestOnNewMessage=vl),wl&&(CIB.config.features.enableGraphicArtJsonResponse=wl),tf(),rf(),uc&&(CIB.config.features.enableBackendExportService=uc),nf(),wh&&(CIB.config.features.enableContextMessage=wh),w=t(e===null||e===void 0?void 0:e.codexOptionsSetsList,null),w&&w.length>0)for(at=0;at<w.length;at++)f(CIB.config.sydney.request.optionsSets,w[at].value);uf();ew&&io(sw,ow);we&&(CIB.config.features.enableTelemetryPrivacy=we);b&&typeof MsbSydneyHelper!="undefined"?MsbSydneyHelper.initCompliantSydneyConfigs():ti&&typeof BceSydneyHelper!="undefined"&&(BceSydneyHelper.initBingChatForEnterpriseSydneyConfigs(),ll&&typeof MsbSydneyHelper!="undefined"&&MsbSydneyHelper.addTenantLogoToHeader());b||(ef(),ff());ic&&(CIB.config.features.enablePageHeaderOverlapClamping=ic);hb&&(CIB.config.features.enablePersistentInputText=!0);rc&&(CIB.config.features.enableEmptyThreadTime=rc);CIB.config.features.enableThreadsConsent=lk;bc&&(gl=t(e===null||e===void 0?void 0:e.threadsAutoSaveOptionset,"autosave"),CIB.config.features.enableDeleteSingleConversationMemory=bc,CIB.config.sydney.request.conversationHistoryOptionsSets=[gl,"savemem","uprofupd","uprofgen"]);kc&&(CIB.config.features.enable1DSTelemetry=kc);fl&&(CIB.config.features.enablePrivateThreadDefaultTitle=fl);el&&(CIB.config.features.enablePromptHandling=el);dk&&f(CIB.config.sydney.request.optionsSets,"u18Scenario");ol&&(CIB.config.features.enableModeAndSlotValidationForAds=ol);hl&&(CIB.config.features.enableSuggestionChipDisplayText=hl);fi&&(CIB.config.features.enableWpFluxTwoTAnswerCard=fi,CIB.config.features.enableWpFluxTwoTAnswerCardFallback=fi,cl&&(CIB.config.features.enableWpFluxTwoTAnswerCardFallback=!1,CIB.config.features.disableWpFluxTwoTAnswerCardFallback=cl));vf();td&&yf();ad&&vd&&(CIB.config.features.enableFreeSydney=!0)}function ci(){var i,r=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableSydTestCache,!1);r&&"SydneyTestHelper"in _w&&(SydneyTestHelper.setTestConfigs(),sj_evt.bind("CHAT_MOCKED",function(t){var i=t&&t.length>1?t[1]:null;i&&(n.processCachedResponseUsingCIB=function(){CIB.processCachedResponse(i)})},!0))}function li(){var i,r,u,f=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableCodexWin,!1),e=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.codexWinCurrentTurn,0),o=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableCodexWinBotMessage,!1);f&&(sj_cook.set(n.userCook,uu,String(e+1),!0,"/",null),o&&(n.shouldForceSendBotGreeting=!0));sj_evt.unbind("showSydFSC",li)}function au(){var n,i=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableDM,!1);i&&CIB.changeColorScheme&&CIB.changeColorScheme(1)}function ai(){var n=Math.round(_d.documentElement.clientWidth||_w.innerWidth);return n<100&&(n=360),n}function vi(){var n=Math.round(_d.documentElement.clientHeight||_w.innerHeight);return n<100&&(n=636),n}function yi(){pi(_w._sydConvTranslation);sj_evt.unbind("sydConvTranslationLoaded",yi)}function pi(n){for(var r,t=0,i=Object.keys(n);t<i.length;t++)r=i[t],CIB.config.strings[r]=n[r]}function vu(){CIB.config.features.enableMUIDUserMode=!0;CIB.config.features.enableSignInUpsellforMuidUser=!0;wi()}function wi(){var n,i,r,u,f,e=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableBfbCookieConsent,!1),o=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableCodexMuidConsentTop,!1),s=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableCodexMuidConsentExplicit,!1),h=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableCodexMuidConsentImplicit,!1),c=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableCodexMuidConsentOverlay,!1),l=o||s||h||c;l&&(CIB.config.features.enableCodexMuidConsentTop=o,CIB.config.features.enableCodexMuidConsentInlineExplicit=s,CIB.config.features.enableCodexMuidConsentInlineImplicit=h,CIB.config.features.enableCodexMuidConsentOverlay=c,CIB.config.sydney.muidUserConsentGiven=e&&ft||ki(),CIB.onConsentGiven&&CIB.onConsentGiven(function(){af();e&&BceSydneyHelper.updateBfbConsent()}))}function bi(){var n,i;return __awaiter(this,void 0,void 0,function(){var r,o,s,u,e,h;return __generator(this,function(c){switch(c.label){case 0:if(oi)return[2];if(oi=!0,r=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableThreadsConsent,!1),o=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.threadsAutoSaveOptionset,"autosave"),CIB.config.features.enableThreadsConsent=r,r&&CIB.onAutosaveConsentChanged)CIB.onAutosaveConsentChanged(function(n){switch(n){case"Allowed":f(CIB.config.sydney.request.optionsSets,o);break;default:ne(CIB.config.sydney.request.optionsSets,o)}});if(!(r&&CIB.getConsent&&CIB.updateConsent))return[3,6];c.label=1;case 1:return c.trys.push([1,5,,6]),[4,CIB.getConsent()];case 2:return(s=c.sent(),u=s.consentSettings.autoSave,e=s.consentSettings.personalization,!(u&&e&&(u!=="Allowed"||e!=="Allowed")))?[3,4]:[4,CIB.updateConsent(u,e)];case 3:c.sent();c.label=4;case 4:return[3,6];case 5:return h=c.sent(),[3,6];case 6:return[2]}})})}function yu(){var n=_w._sydConvConfig,i=t(n===null||n===void 0?void 0:n.enableImageSearch,!1);if(i){var f=t(n===null||n===void 0?void 0:n.isMobileHost,!1),r=t(n===null||n===void 0?void 0:n.imageSearchFormCode,""),u=t(n===null||n===void 0?void 0:n.imageSearchEnableMediaCanvas,!0),e=t(n===null||n===void 0?void 0:n.imageSearchMaxImageCount,3),o=t(n===null||n===void 0?void 0:n.imageSearchForceSquareImages,!1),s=t(n===null||n===void 0?void 0:n.imageSearchEnableCachedImages,!1);CIB.config.features.enableImageSearch=i;CIB.config.imageSearch.forceSquareImages=o;CIB.config.imageSearch.maxImageCount=e;CIB.config.imageSearch.enableMediaCanvas=u;CIB.config.imageSearch.enableCachedImages=s;u&&f&&(CIB.config.imageSearch.query.view="detailV2",CIB.config.imageSearch.query.idpbck="1");r&&(CIB.config.imageSearch.query.form=r)}}function pu(){var n,i,r,u,f,e,o,s,h,c,l,a,v,y,p=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableVisualSearch,!1);if(p){var b=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.removeCameraInputForVisualSearch,!1),k=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.dVSOC,!1),d=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.aimgut,!1),w=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.visualSearchSubscriptionId,""),g=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.eifpiab,!1),nt=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.emwc,!1),tt=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.eufte,!1),it=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.ecambar,!1),rt=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.eaddimgbar,!1),ut=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.eaddimgicon,!1),ft=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.evsfre,!1),et=t((v=_w._sydConvConfig)===null||v===void 0?void 0:v.ekrbu,!1),ot=t((y=_w._sydConvConfig)===null||y===void 0?void 0:y.evsptnr,!1);b&&(CIB.config.features.enableCameraInputForVisualSearch=!1);k&&(CIB.config.features.enableVisualSearchOrientationCheck=!1);et&&(CIB.config.visualSearch.baseUrl=window.location.origin);CIB.config.features.enableVisualSearch=p;CIB.config.features.enableImageFilePasteInActionBar=g;CIB.config.features.enableUnsupportedFileTypeError=tt;CIB.config.features.enableVisualSearchFRE=ft;CIB.config.features.enablePartnerVisualSearchUpload=ot;CIB.config.visualSearch.allowImageOnlyUserTurn=d;CIB.config.visualSearch.enableMobileWebCamera=nt;CIB.config.visualSearch.enableCameraInActionBar=it;CIB.config.visualSearch.enableAttachImageInActionBar=rt;CIB.config.visualSearch.useImageAddIcon=ut;CIB.config.visualSearch.includeCredentialInXHRRequest=!0;!w||(CIB.config.visualSearch.subscriptionId=w);wu();bu();ku()}}function wu(){var i,n=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.visualSearchRestrictedTonesList,null);(n===null||n===void 0?void 0:n.length)>0&&CIB.config.visualSearch&&(CIB.config.visualSearch.restrictedTones=[],n.forEach(function(n){CIB.config.visualSearch.restrictedTones.push(n.value)}))}function bu(){var i,n=CIB.config.visualSearch,t;((i=_w._sydConvConfig)===null||i===void 0?void 0:i.evssid)&&n&&(t=sj_cook===null||sj_cook===void 0?void 0:sj_cook.get("_SS","SID"),t&&(n.query?n.query.SID=t:n.query={SID:t}))}function ku(){var n,i,r,f=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.evscamprd,!1),u=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.vscamprdname,"");f&&u&&((r=_w.SydneyCameraProviderFactory)===null||r===void 0?void 0:r.create(u))}function du(){var n,i,r,u,f,e,o,s,h=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableFixCodeXAsBug,!1),c=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableStableAutosuggestion,!1),l=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableEndpointInASTelemetry,!1),a=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableAutosuggestMetrics,!1),v=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableCvidInAutosuggestAPI,!1),y=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableASBackspaceFix,!1),p=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableFullScreenMobile,!1),w=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableGhostingSuggestTelemetry,!1);CIB.config.features.enableFixCodeXAsBug=h;CIB.config.features.enableStableAutosuggestion=c;CIB.config.features.enableEndpointInASTelemetry=l;CIB.config.features.enableAutosuggestMetrics=a;CIB.config.features.enableCvidInAutosuggestAPI=v;CIB.config.features.enableASBackspaceFix=y;CIB.config.features.enableFullScreenMobile=p;CIB.config.features.enableGhostingSuggestTelemetry=w}function gu(){var n,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableFileUpload,!1),d=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableFileUploadPrivacyMessage,!1),g=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableMobileFileUpload,!1),nt=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableFileUploadWebPageUrlInput,!1),tt=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableFileUploadContextInThreads,!1),it=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableTextFilePasteInActionBar,!1),rt=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableFileUploadLongContext,!1),ut=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableFileUploadForAllModes,!1),ft=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableFileUploadDirect,!1),et=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableFileUploadPdfSupport,!1),ot=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableFileUploadDocxSupport,!1),st=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableFileUploadAudioSupport,!1),ht=t((v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableFileUploadPDFSupportByKED,!1),ct=t((y=_w._sydConvConfig)===null||y===void 0?void 0:y.enableFileUploadAnyTypeSupport,!1),lt=t((p=_w._sydConvConfig)===null||p===void 0?void 0:p.enableFileUploadAuthorization,!1),at=t((w=_w._sydConvConfig)===null||w===void 0?void 0:w.fileUploadMaxSizeLongContext,pr),vt=t((b=_w._sydConvConfig)===null||b===void 0?void 0:b.fileUploadMaxAudioSize,wr);k&&(CIB.config.features.enableFileUpload=!0);d&&(CIB.config.features.enableFileUploadPrivacyMessage=!0);g&&(CIB.config.features.enableMobileFileUpload=!0);nt&&(CIB.config.features.enableFileUploadWebPageUrlInput=!0);tt&&(CIB.config.features.enableFileUploadContextInThreads=!0);it&&(CIB.config.features.enableTextFilePasteInActionBar=!0);rt&&(CIB.config.features.enableFileUploadLongContext=!0);ut&&(CIB.config.features.enableFileUploadForAllModes=!0);ft&&(CIB.config.features.enableFileUploadDirect=!0);et&&(CIB.config.features.enableFileUploadPdfSupport=!0);ot&&(CIB.config.features.enableFileUploadDocxSupport=!0);st&&(CIB.config.features.enableFileUploadAudioSupport=!0);ht&&(CIB.config.features.enableFileUploadPDFSupportByKED=!0);ct&&(CIB.config.features.enableFileUploadAnyTypeSupport=!0);lt&&(CIB.config.features.enableFileUploadAuthorization=!0);CIB.config.fileUpload.fileSizeLimitationLongContext=at;CIB.config.fileUpload.audioFileSizeLimitation=vt}function nf(){var e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,rt=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableShareWholeThreadMockUp,!1),ut=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableThreadShareLandingPage,!1),ft=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableShareConversation,!1),et=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableShareThreadWithNoCache,!1),ot=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableWholeThreadPerformanceFix,!1),st=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableShareCurrentThreadMessagesfromAPI,!1),ht=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableThreadShareWithoutRenderCardRequest,!1),ct=t((v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableGetConversationAPIWithSNRProxy,!1),lt=t((y=_w._sydConvConfig)===null||y===void 0?void 0:y.enableGetSharedMessagesAPIWithSNRProxy,!1),at=t((p=_w._sydConvConfig)===null||p===void 0?void 0:p.enableBICHistory,!1),vt=t((w=_w._sydConvConfig)===null||w===void 0?void 0:w.enable2TScreenshot,!1),yt=t((b=_w._sydConvConfig)===null||b===void 0?void 0:b.enable2TScreenshotSnR,!1),it=t((k=_w._sydConvConfig)===null||k===void 0?void 0:k.enableThreads,!1),wt=t((d=_w._sydConvConfig)===null||d===void 0?void 0:d.enableThreadsCF,!1),bt=t((g=_w._sydConvConfig)===null||g===void 0?void 0:g.enableFlux3P,!1),n,i,pt;if(rt&&(CIB.config.features.enableShareWholeThreadMockUp=rt),ut&&(CIB.config.features.enableThreadShareLandingPage=ut),ft&&(CIB.config.features.enableShareConversation=ft),et&&(CIB.config.features.enableShareThreadWithNoCache=et),ot&&(CIB.config.features.enableWholeThreadPerformanceFix=ot),st&&(CIB.config.features.enableShareCurrentThreadMessagesfromAPI=st),ht&&(CIB.config.features.enableThreadShareWithoutRenderCardRequest=ht),ct&&(CIB.config.features.enableGetConversationAPIWithSNRProxy=ct),lt&&(CIB.config.features.enableGetSharedMessagesAPIWithSNRProxy=lt),at&&(CIB.config.features.enableBICHistory=at),vt&&(CIB.config.features.enableAnswerScreenshot=vt),yt&&(CIB.config.features.enableAnswerScreenshotSnR=yt),it){if(CIB.config.features.enableThreads=it,n=t((nt=_w._sydThreads)===null||nt===void 0?void 0:nt.threads,null),n&&n.length>0)for(i=0;i<n.length;i++)CIB.addThread(n[i]);pt=t((tt=_w._sydConvConfig)===null||tt===void 0?void 0:tt.threadsAutoSaveOptionset,"autosave");f(CIB.config.sydney.request.optionsSets,pt)}(it||wt)&&u(r.System,"THREADS","1","1");CIB.config.sydney.request.scenario!=="SERP"&&bi()}function tf(){var n,i,r,u=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableTypingIndicatorAnimation,!1),f=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableTypingIndicatorDemoteStyle,!1),e=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.typingIndicatorAnimationDuration,nu);u&&(CIB.config.features.enableTypingIndicatorAnimation=!0,CIB.config.messaging.typingIndicatorAnimationDuration=e);f&&(CIB.config.features.enableTypingIndicatorDemoteStyle=!0)}function rf(){var n,i,r,u,f,e,o,h=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableAdSlugsDesktop,!1),c=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableAdSlugsMobile,!1),l=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableSearchQueryForInlineAds,!1),a=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableDevFormOverrideForAds,!1),v=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableFixForInlineAdsSQ,!1),s=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.codexPartnerScenario,""),y=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableInlineAdsDynamicWidth,!1);h&&(CIB.config.features.enableAdSlugsDesktop=!0);c&&(CIB.config.features.enableAdSlugsMobile=!0);l&&(CIB.config.features.enableSearchQueryForInlineAds=!0);a&&(CIB.config.features.enableDevFormOverrideForAds=!0);v&&(CIB.config.features.enableFixForInlineAdsSQ=!0);s!==""&&(CIB.config.sydney.request.scenario=s);y&&(CIB.config.features.enableInlineAdsDynamicWidth=!0)}function uf(){var n,i,r,u,f,e,o,s=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableSydneySapphireUpsellMessageActions,!1),h=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableSydneySapphireUpsellEndOfChat,!1),c=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableSydneySapphireUpsellVisualSearch,!1),l=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.sydneySapphireUpsellTreatment,0),a=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.isAccountLinkedWithActiveAAD,!1),v=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.sydneyContinueOnPhoneShortenQRCodeUrl,"https://bingapp.microsoft.com/bing?style=newbing"),y=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.sydSapphireUpsellVisualSearchQRCodeUrl,"https://bingapp.microsoft.com/bing?adjust=13uz7blz_13evwnmy");s&&!a&&(CIB.config.features.enableSydSapphireUpsellOnMessageActions=s,CIB.config.mobileUpsell.sydSapphireUpsellTreatment=l,CIB.config.mobileUpsell.qrCodeBaseUrl=v);h&&(CIB.config.features.enableSydSapphireUpsellOnEndOfChat=h,CIB.config.mobileUpsell.sydSapphireUpsellTreatment=l);c&&(CIB.config.features.enableSydSapphireUpsellVisualSearch=c,CIB.config.mobileUpsell.qrCodeVisualSearchUrl=y)}function ff(){var i,r,u,f,e,o,s,l=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.sydOptionSets,!1),a=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.isSydCorpnet,!1),v=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.noInitOpts,!1),y=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.extraSappOptions,""),p=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.extraEdgeOptions,""),w=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.extraBceOptions,""),k=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.removeDeepleo,!1),d=new URLSearchParams(_w.location.search.toLowerCase()),b=d.get(hr.toLowerCase()),n,h;(v||l!=""||a&&b||y||p||w)&&(n=v?[]:CIB.config.sydney.request.optionsSets,n=c(n,l),a&&(n=c(n,b)),n=c(n,y),n=c(n,p),n=c(n,w),k&&(h=n.indexOf("deepleo"),h>=0&&n.splice(h,1)),CIB.config.sydney.request.optionsSets=n)}function ef(){var c,l,a,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,ii=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.toneDefault,n.BALANCED_TONE),ri=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableToneCook,!1),ui=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableBalDefault,!1),fi=t((y=_w._sydConvConfig)===null||y===void 0?void 0:y.userPriorityLevel,999),ei=t((p=_w._sydConvConfig)===null||p===void 0?void 0:p.enableUserPriorityLevel,!1),bt=t((w=_w._sydConvConfig)===null||w===void 0?void 0:w.enableTonePerf,!1),oi=t((b=_w._sydConvConfig)===null||b===void 0?void 0:b.enableCreativeToneIgnoreAndDefaultToBalanced,!1),si=t((k=_w._sydConvConfig)===null||k===void 0?void 0:k.enablePreciseToneIgnoreAndDefaultToBalanced,!1),wt,ni,ti;o=t((d=_w._sydConvConfig)===null||d===void 0?void 0:d.enableNoToneOpt,!1);((g=_w._sydConvConfig)===null||g===void 0?void 0:g.shareLoadingUI)&&(CIB.config.features.enableShareLoadingUI=!0);var r=!ei||fi>0,vt=r?t((nt=_w._sydConvConfig)===null||nt===void 0?void 0:nt.balTone,""):"harmonyv3",yt=t((tt=_w._sydConvConfig)===null||tt===void 0?void 0:tt.crtTone,""),pt=t((it=_w._sydConvConfig)===null||it===void 0?void 0:it.prcTone,""),kt=t((rt=_w._sydConvConfig)===null||rt===void 0?void 0:rt.sydBalOpts,""),dt=t((ut=_w._sydConvConfig)===null||ut===void 0?void 0:ut.sydCrtOpts,""),gt=t((ft=_w._sydConvConfig)===null||ft===void 0?void 0:ft.sydPrcOpts,""),u=r?t((et=_w._sydConvConfig)===null||et===void 0?void 0:et.sydBalExtraOpts,""):"",e=r?t((ot=_w._sydConvConfig)===null||ot===void 0?void 0:ot.sydCrtExtraOpts,""):"",h=r?t((st=_w._sydConvConfig)===null||st===void 0?void 0:st.sydPrcExtraOpts,""):"";kt&&(u+=(u!==""?",":"")+kt);dt&&(e+=(e!==""?",":"")+dt);gt&&(h+=(h!==""?",":"")+gt);u&&(s.Balanced=u.split(","));e&&(s.Creative=e.split(","));h&&(s.Precise=h.split(","));(vt||o&&vt=="")&&(i[n.BALANCED_TONE]=vt);(yt||o&&yt=="")&&(i[n.CREATIVE_TONE]=yt);(pt||o&&pt=="")&&(i[n.PRECISE_TONE]=pt);bt&&(CIB.config.features.enableTonePerf=bt);CIB.config.features.enableResponseToneSelector=!0;CIB.config.features.enablePersistentResponseToneSelector=t((ht=_w._sydConvConfig)===null||ht===void 0?void 0:ht.enablePersistentToneSelector,!1);CIB.config.features.enableResponseToneObjects=(lt=(ct=_w._sydConvConfig)===null||ct===void 0?void 0:ct.enableSuppressTones)!==null&&lt!==void 0?lt:!1;CIB.config.features.enableResponseToneColorThemes=!0;wt=Object.keys(i);((at=_w._sydConvConfig)===null||at===void 0?void 0:at.enableSuppressTones)?CIB.config.sydney.responseTones=wt.map(function(n){var t,i,r=(i=(t=_w._sydConvConfig)===null||t===void 0?void 0:t["suppressKnob".concat(n)])!==null&&i!==void 0?i:0;return{tone:n,disabled:r}}):CIB.config.sydney.responseToneOptions=wt;ni=oi&&n.CREATIVE_TONE===v();ti=si&&n.PRECISE_TONE===v();ni||ti?sf():ri?pf(ii):ui&&f(CIB.config.sydney.request.optionsSets,i[n.BALANCED_TONE]);bf()}function sf(){CIB.config.sydney.request.optionsSets=y(CIB.config.sydney.request.optionsSets,n.BALANCED_TONE,CIB.responseTone);f(CIB.config.sydney.request.optionsSets,i[n.BALANCED_TONE]);CIB.responseTone=n.BALANCED_TONE;h=CIB.responseTone}function st(i){var u,f,e,o,s,h,r,c;(t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableSyntheticStreamSpeedBasedOnTone,!1)&&(r=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.syntheticStreamSpeed,wt),i===n.BALANCED_TONE&&(CIB.config.messaging.messageBufferWorkerStreamDelayMS=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.syntheticStreamSpeedForBalancedTone,r)),i===n.CREATIVE_TONE&&(CIB.config.messaging.messageBufferWorkerStreamDelayMS=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.syntheticStreamSpeedForCreativeTone,r)),i===n.PRECISE_TONE&&(CIB.config.messaging.messageBufferWorkerStreamDelayMS=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.syntheticStreamSpeedForPreciseTone,r))),c=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableStreamSyntheticTextResponses,!1),c)&&(CIB.config.messaging.streamSyntheticTextResponses=hf(i))}function hf(r){var u,f,e,s=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableStreamSyntheticTextResponsesForBalancedTone,!1),h=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableStreamSyntheticTextResponsesForCreativeTone,!1),c=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableStreamSyntheticTextResponsesForPreciseTone,!1);return s&&(r===n.BALANCED_TONE&&i[n.BALANCED_TONE]==="galileo"||o&&i[n.BALANCED_TONE]==="")||h&&(r===n.CREATIVE_TONE&&i[n.CREATIVE_TONE]==="h3imaginative"||o&&i[n.CREATIVE_TONE]==="")||c&&(r===n.PRECISE_TONE&&i[n.PRECISE_TONE]==="h3precise"||o&&i[n.PRECISE_TONE]==="")}function cf(n){if(!n)return nt.Demote;for(var t in nt)if(t.toLowerCase().trim()===n.toLowerCase().trim())return nt[t];return nt.Demote}function lf(){var t=sj_cook.get(n.userCook,fu),i=cf(t);CIB.config.sydney.bingFirstPageAdultFilter=i}function ki(){var i,r=sj_cook.get(n.userCook,l),e;if(a){var o=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.bceTermsOfUseVersion,1),u=sj_cook.get(ni,l),s=!!r||!!u,f=s?Number(r)||Number(u)||1:0;return!!f&&f>=o}return e=sj_cook.get(b,b),r===e}function af(){var i,f,e,o,s,h,c,v,y,d=sj_cook.get(b,b),g=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.bceTermsOfUseVersion,1),w=a?g.toString():d,p,k;sj_cook.set(n.userCook,l,w,!0,"/",null);sj_cook.set(ni,l,w,!0,"/",null);u(r.System,"MuidConsentProvided","MuidUser",{IsConsent:"1"});CIB.config.sydney.muidUserConsentGiven=!0;CIB.config.features.enableSuggestionBarInUnexpandedChatAnswer&&(p=(o=(e=(f=_d.querySelector(".b_ans #b_sydTigerCont"))===null||f===void 0?void 0:f.querySelector("cib-serp"))===null||e===void 0?void 0:e.shadowRoot)===null||o===void 0?void 0:o.querySelector("cib-see-more-container"),k=(y=(v=(c=(h=(s=_d.querySelector(".b_ans #b_sydTigerCont"))===null||s===void 0?void 0:s.querySelector("cib-serp"))===null||h===void 0?void 0:h.shadowRoot)===null||c===void 0?void 0:c.querySelector("cib-conversation"))===null||v===void 0?void 0:v.shadowRoot)===null||y===void 0?void 0:y.querySelector("cib-suggestion-bar"),p&&k&&p.setAttribute("has-suggestions","true"))}function vf(){if(typeof CIB.version!="undefined"&&CIB.version&&CIB.version.version&&typeof sj_cook!="undefined"&&sj_cook){var t=CIB.version.version,i=sj_cook.get(n.userCook,ti);i&&i===t||(sj_cook.set(n.userCook,ti,t,!0,"/",null),u(r.System,"CIB","CIBInfo",{version:t}))}}function yf(){var n,i=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.DedicatedIpType,"unknown");["nochat","nochatstrict"].indexOf(i)>-1&&u(r.System,"NoChatVariant","NoChatVariantInfo",{DedicatedIpType:i})}function v(){var i,r=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableToneCookExpiry,!1),u=r?n.toneCook:n.userCook;return sj_cook.get(u,n.toneCrumb)}function pf(e){var s,c,l,a,p,d=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableToneCookExpiry,!1),b=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableBalancedSerp,!1),it=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableAlwaysCreativeSerp,!1),rt=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableSuperOptionsSets,!1),ut=t((p=_w._sydConvConfig)===null||p===void 0?void 0:p.enableBalancedSerpLog,!1),o=v(),k,nt;if(ut&&o!=n.BALANCED_TONE&&u(r.System,"BalSerpOverride","Tone",{tone:o}),kf()){k=tt(bt).toLowerCase().trim();CIB.responseTone=g[k];ht(CIB.responseTone,!1,d);u(r.System,"SET_TONE_FROM_URL",k,"");u(r.System,w,"Tone",{tone:CIB.responseTone});return}it?(o=n.CREATIVE_TONE,CIB.responseTone=o):!b&&o!=null&&i.hasOwnProperty(o)?(CIB.responseTone=o,u(r.System,w,"Tone",{tone:o})):(d&&(nt=sj_cook.get(n.userCook,n.hasSetToneCrumb),nt=="1"&&(sj_cook.set(n.userCook,n.hasSetToneCrumb,"0",!0,"/",null),u(r.System,"ResetTone","Tone",{}))),CIB.responseTone=e,o=e,u(r.System,"DefaultTone","Tone",{tone:o}));rt&&f(CIB.config.sydney.request.optionsSets,tu);et=CIB.config.sydney.request.optionsSets.length;!b&&i.hasOwnProperty(o)?(f(CIB.config.sydney.request.optionsSets,i[o]),CIB.config.sydney.request.optionsSets=y(CIB.config.sydney.request.optionsSets,o),h=o,st(h)):b&&i.hasOwnProperty(n.BALANCED_TONE)&&(f(CIB.config.sydney.request.optionsSets,i[n.BALANCED_TONE]),CIB.config.sydney.request.optionsSets=y(CIB.config.sydney.request.optionsSets,n.BALANCED_TONE),h=n.BALANCED_TONE,st(n.BALANCED_TONE))}function wf(n){var i,f=n&&n.length>1?n[1]:null,e=f?f.toLowerCase().trim():"",o,s;f&&g.hasOwnProperty(e)&&(o=n&&n.length>2?n[2]:!1,s=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableToneCookExpiry,!1),CIB.responseTone=g[e],ht(CIB.responseTone,o,s),u(r.System,w,"Tone",{tone:CIB.responseTone}))}function bf(){var n,i,r,u;if(sj_evt.bind(ru,wf,!0),r=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableToneCookExpiry,!1),u=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.isCompliantSydneyEndpointEnabled,!1),!u&&CIB.onResponseToneChanged)CIB.onResponseToneChanged(function(n){ht(n,!0,r)})}function tt(n){var i=_w.location.search,r=new URLSearchParams(i),t=r.get(n);return t?t:""}function kf(){var n,r=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableSetToneFromUrl,!1),i;return r?(i=tt(bt),i&&g.hasOwnProperty(i.toLowerCase().trim())):!1}function ht(t,r,u){var l=[i[t]].concat(s[t]).toString(),c,e;t!==v()&&gi("ChangedTone","Tone",{newTone:t});r&&(u?(c=gf(),sj_cook.set(n.toneCook,n.toneCrumb,t,!0,"/",c),sj_cook.set(n.toneCook,n.toneOptsCrumb,l,!0,"/",c),sj_cook.set(n.userCook,n.hasSetToneCrumb,"1",!0,"/",null)):(sj_cook.set(n.userCook,n.toneCrumb,t,!0,"/",null),sj_cook.set(n.userCook,n.toneOptsCrumb,l,!0,"/",null)));i.hasOwnProperty(t)&&(e=di(CIB.config.sydney.request.optionsSets,Object.keys(i)),e!==-1?o&&i[t]===""?(et=e,CIB.config.sydney.request.optionsSets.splice(e,1)):CIB.config.sydney.request.optionsSets[e]=i[t]:o?f(CIB.config.sydney.request.optionsSets,i[t],et):f(CIB.config.sydney.request.optionsSets,i[t]),CIB.config.sydney.request.optionsSets=y(CIB.config.sydney.request.optionsSets,t,h),h=t,st(h))}function df(){var u,f,e,o=n.getConfigOrDefault((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableBalancedSerp,!1),t,i,s;o&&!ei&&(ei=!0,o&&(t=n.getCookieTone(),t!=null&&t!=n.BALANCED_TONE&&(i=CIB.manager.conversation._lastMessage,s=(e=(f=CIB===null||CIB===void 0?void 0:CIB.config)===null||f===void 0?void 0:f.greeting)===null||e===void 0?void 0:e.shouldSendBotGreeting,CIB.config.greeting.shouldSendBotGreeting=!1,n.shouldResetBotGreeting=!1,CIB.responseTone=t,n.lastQuery="",i&&i.text&&CIB.registerContext([{author:"bot",source:"serpBalResp",text:i.text}]),n.shouldResetBotGreeting=!0,CIB.config.greeting.shouldSendBotGreeting=s,n.SydLog(r.System,"SetCookToneAfterSERP","Tone",{tone:t}))))}function gf(){var n=new Date;return n.setDate(n.getDate()+(n.getHours()<2?1:2)),n.setHours(2),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),(n.getTime()-(new Date).getTime())/6e4}function y(n,t,i){return i===void 0&&(i=""),i!=""&&s.hasOwnProperty(i)&&(n=te(n,s[i])),t!=""&&s.hasOwnProperty(t)&&s[t].forEach(function(t){f(n,t)}),n}function f(n,t,i){i===void 0&&(i=-1);t&&n.indexOf(t)<0&&(i<0?n.push(t):n.splice(i,0,t))}function ne(n,t){var i=n.indexOf(t);i>=0&&n.splice(i,1)}function te(n,t){return t.forEach(function(t){var i=n.indexOf(t);i>=0&&n.splice(i,1)}),n}function di(n,t){for(var f,u,r=0;r<t.length;r++)if(f=t[r],u=n.indexOf(i[f]),u>=0)return u;return-1}function ct(n,t){var i={};return t?n.locType&&(i.LocationType=n.locType):n.accuracy&&(i.Accuracy=n.accuracy),n.state&&(i.State=decodeURI(n.state)),n.city&&(i.City=decodeURI(n.city)),n.lat&&n.long&&(i.Center={Latitude:parseFloat(n.lat),Longitude:parseFloat(n.long)}),n.source&&(i.LocationSource=n.source),n.altitude&&(i.Altitude=n.altitude),n.altitudeAcc&&(i.AltitudeAccuracy=n.altitudeAcc),n.displayName&&(i.DisplayName=n.displayName),n.name&&(i.Name=n.name),n.heading&&(i.Heading=n.heading),n.isValidLocation&&(i.IsValidLocation=n.isValidLocation),n.range&&(i.Radius=n.range),n.speed&&(i.Speed=n.speed),n.ts&&(i.Timestamp=n.ts),n.ets&&(i.ExpiryTimestamp=n.ets),i}function ie(){var t=(new Date).getTimezoneOffset(),r=Math.floor(Math.abs(t/60)),u=Math.abs(t%60),i;t<0?i="+"+e(r)+":"+e(u):t>0?i="-"+e(r)+":"+e(u):t==0&&(i="Z");var n=new Date,f=n.getDate(),o=n.getMonth()+1,s=n.getFullYear(),h=n.getHours(),c=n.getMinutes(),l=n.getSeconds();return e(s)+"-"+e(o)+"-"+e(f)+"T"+e(h)+":"+e(c)+":"+e(l)+i}function e(n){return n<10?"0"+n:n}function c(n,t){if(t){var i=t.split(",");return n.concat(i)}return n}function t(n,t){return typeof n!="undefined"?n:t}function re(n){var t=__spreadArray([],CIB.config.sydney.request.optionsSets,!0),r;return i.hasOwnProperty(n)&&(r=di(t,Object.keys(i)),r!==-1&&(t[r]=i[n]),t=y(t,n,h)),t}function u(n,i,r,u){var e,o,s,h,c,f,l,a,v,y,p;u===void 0&&(u=null);f=[];l=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.isCompliantSydneyEndpointEnabled,!1);l&&f.push("IsBizChat",l.toString());a=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.isBingChatForEnterprise,!1);a&&f.push("IsBCE",a.toString());v=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.isBingChatForFaculty,!1);y=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.isBingChatForStudents,!1);v&&f.push("IsBCSFaculty","true");y&&f.push("IsBCSStudent","true");p=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableTelemetryPrivacy,!1);p&&(u=ue(u));u==null?Log.Log.apply(Log,__spreadArray([n,"Codex",i,!1,"Namespace",r],f,!1)):Log.Log.apply(Log,__spreadArray([n,"Codex",i,!1,"Namespace",r,"CustomData",JSON.stringify(u)],f,!1))}function ue(n){return hu.forEach(function(t){var i,r;n[t]!==undefined&&(n[t]=ut);((i=n.CustomData)===null||i===void 0?void 0:i[t])!==undefined&&(n.CustomData[t]=ut);((r=n.EncryptedData)===null||r===void 0?void 0:r[t])!==undefined&&(n.EncryptedData[t]=ut)}),n}function gi(n,t,i){u(r.Interaction,n,t,i)}function fe(){if(history&&(n.enableConvModeSwitchAjax&&(_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search}),sj_be(_w,"popstate",function(i){var f,e,o,s,h,c,l,a,v,y,r,u;if(n.enableBingChatPath=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableBingChatPath,!1),n.enableConvModeSwitchAjax=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableConvModeSwitchAjax,!1),n.enableConvModeSwitchAjax)if(r=_w._currentRoute,_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search},n.enableBingChatPath){if(u=_ge("sb_form_q"),it((o=_w._currentRoute)===null||o===void 0?void 0:o.search)!=(u===null||u===void 0?void 0:u.value)&&(_w._isConvAjaxUpdated||((h=(s=_w._currentRoute)===null||s===void 0?void 0:s.state)===null||h===void 0?void 0:h.ajaxserp)===!0)){var p=_w.location,w=p.href,b=w.indexOf("/search");if(b>=0){window.location.reload();return}}}else if(it(r===null||r===void 0?void 0:r.search)!=it((c=_w._currentRoute)===null||c===void 0?void 0:c.search)&&(_w._isConvAjaxUpdated||((a=(l=_w._currentRoute)===null||l===void 0?void 0:l.state)===null||a===void 0?void 0:a.ajaxserp)===!0)){var p=_w.location,w=p.href,b=w.indexOf("/search");if(b>=0){window.location.reload();return}}((v=i===null||i===void 0?void 0:i.state)===null||v===void 0?void 0:v.inConvMode)&&_G[n.SYD_MODE]=="serp"?sj_evt.fire("showSydFSC",null,null,!1,!0):((y=i===null||i===void 0?void 0:i.state)===null||y===void 0?void 0:y.inConvMode)||_G[n.SYD_MODE]!="conversation"||(sj_evt.fire("preHideSydFSCByHistory"),sj_evt.fire("hideSydFSC",!0))}),URLSearchParams)){var i=new URLSearchParams(window.location.search);ui=i.get("showconv")==="1"}}function ee(i){var f,e,o,s,h=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.isNewBingChat,!1);if(n.enableBingChatPath=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableBingChatPath,!1),history){if((ui||h)&&fi&&i){fi=!1;history.replaceState({inConvMode:i},document.title||"");n.enableConvModeSwitchAjax=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableConvModeSwitchAjax,!1);u(r.System,"SydHistory","replace",{enableConvModeSwitchAjax:n.enableConvModeSwitchAjax,showconv:i});n.enableConvModeSwitchAjax&&(_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search});return}ri?nr(i):n.enableBingChatPath?oe(i):(history.pushState({inConvMode:i},document.title||""),n.enableConvModeSwitchAjax=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableConvModeSwitchAjax,!1),u(r.System,"SydHistory","push",{enableConvModeSwitchAjax:n.enableConvModeSwitchAjax,showconv:i}),n.enableConvModeSwitchAjax&&(_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search}))}}function nr(i){var f,e=new URL(window.location.href);e.searchParams.set("showconv",i?"1":"0");history.pushState({inConvMode:i},lt(i),e);n.enableConvModeSwitchAjax=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableConvModeSwitchAjax,!1);u(r.System,"SydHistory","push",{enableConvModeSwitchAjax:n.enableConvModeSwitchAjax,showconv:i,Paramflag:1});n.enableConvModeSwitchAjax&&(_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search})}function oe(i){var f,e=_ge("sb_form_q"),o=_ge("sb_form"),s=i?"/ai/chat":"/search";history.pushState({inConvMode:i},lt(i),s+"?q="+encodeURIComponent(e.value||"Bing AI")+se(o));n.enableConvModeSwitchAjax=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enableConvModeSwitchAjax,!1);u(r.System,"SydHistory","push",{enableConvModeSwitchAjax:n.enableConvModeSwitchAjax,showconv:i,Paramflag:1});n.enableConvModeSwitchAjax&&(_w._currentRoute={state:_w.history.state,href:_w.location.href,search:_w.location.search})}function se(n){for(var r="",i=n.getElementsByTagName("input"),t=0;t<i.length;t++)i[t].type==="hidden"&&i[t].name!="form"&&(r+="&"+i[t].name+"="+encodeURIComponent(i[t].value));return r+"&form=CONVAJ"}function lt(n){return k&&d?n?k:d:document.title}function he(n){k&&d&&(document.title=lt(n))}function ce(){var t,n;((t=history===null||history===void 0?void 0:history.state)===null||t===void 0?void 0:t.inConvMode)&&(n=_ge("sb_form_q"),n&&n.value?sj_evt.fire("showSydFSC",n.value):sj_evt.fire("showSydFSC"))}function le(){function w(n){if(n&&n.length>=2){var t=n[1].waitlist;t&&t=="2"&&(CIB.config.features.enableMUIDUserMode=!1,CIB.config.messaging.maxTurnsPerConversation=it,sj_evt.unbind("rewready",w))}}var i,r,u,f,e,o,s,h,c,l,d=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableSydTigerAns,!1),g=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableSydAjaxReset,!1),y,p,a,b,k,v;CIB.onModeChanged(function(t){switch(t){case"conversation":sj_evt.fire("showSydFSC");CIB.config.sydney.request.scenario==="SERP"&&bi();break;case"off-stage":if(n.ignoreFirstOffStage){n.ignoreFirstOffStage=!1;CIB.showConversation();break}sj_evt.fire("hideSydFSC");break;default:Log.Log("ClientInst","Codex","ModeChangeError",!1,"CustomData",JSON.stringify({mode:t}))}});if(d&&(y=_ge("b_sydTigerCont"),y)){p=_d.querySelector("#b_pole #b_sydTigerCont")!=null;CIB.onSerpSlotSuggestionInvoked(function(){_G[n.SYD_MODE]!="conversation"&&(n.LogIntEvent("ConversationViewEnter",p?"Pole":"RightRail",{source:"ChatBubble"}),sj_evt.fire("showSydFSC"))});a=_ge("sb_form_q");a&&(CIB.config.sydney.slottedModeTurnIndex=sr()&&((e=(f=(u=CIB===null||CIB===void 0?void 0:CIB.vm)===null||u===void 0?void 0:u.conversation)===null||f===void 0?void 0:f.turns)===null||e===void 0?void 0:e.length)?Math.max(CIB.vm.conversation.turns.length-1,0):0,n.lastQuery=a.value.toLowerCase().trim())}g&&sj_evt.bind("ajax.unload",function(){var n,t,i,r,u,f,e,o,s,h,c;CIB&&(c=(t=(n=CIB===null||CIB===void 0?void 0:CIB.config)===null||n===void 0?void 0:n.greeting)===null||t===void 0?void 0:t.shouldSendBotGreeting,CIB.config.greeting.shouldSendBotGreeting=!1,(u=(r=(i=CIB===null||CIB===void 0?void 0:CIB.manager)===null||i===void 0?void 0:i.stream)===null||r===void 0?void 0:r.subscription)===null||u===void 0?void 0:u.dispose(),(e=(f=CIB===null||CIB===void 0?void 0:CIB.manager)===null||f===void 0?void 0:f.stream)===null||e===void 0?void 0:e.complete(),(s=(o=CIB===null||CIB===void 0?void 0:CIB.manager)===null||o===void 0?void 0:o.stream)===null||s===void 0?void 0:s.finalizeStreamSubscription(),(h=CIB===null||CIB===void 0?void 0:CIB.manager)===null||h===void 0?void 0:h.resetConversation(),CIB.config.greeting.shouldSendBotGreeting=c)});var nt=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.codexMUIDUser,!1),tt=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableSigninTurnFix,!0),it=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.maxTurnsPerConversation,rt);if(nt&&tt&&sj_evt.bind("rewready",w,!0),CIB.onModalVisibilityChanged)CIB.onModalVisibilityChanged(function(n){var t=_ge("b_header");t&&(n?Lib.CssClass.add(t,ii):Lib.CssClass.remove(t,ii))});b=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableThreads,!1);k=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.isAccountLinkedWithActiveAAD,!1);!b&&k&&(v=_qs("body"),v&&Lib.CssClass.add(v,cu))}function ae(){var t,i,r,u,f,e,o,s,h,l=(r=(i=(t=CIB===null||CIB===void 0?void 0:CIB.vm)===null||t===void 0?void 0:t.conversation)===null||i===void 0?void 0:i.model)===null||r===void 0?void 0:r.suggestions,n=document.activeElement,c;return!l||!n||n.nodeName!=="CIB-SERP"?"":(n=(s=(o=(e=(f=(u=n===null||n===void 0?void 0:n.shadowRoot)===null||u===void 0?void 0:u.activeElement)===null||f===void 0?void 0:f.shadowRoot)===null||e===void 0?void 0:e.activeElement)===null||o===void 0?void 0:o.shadowRoot)===null||s===void 0?void 0:s.activeElement,!n||n.nodeName!=="CIB-SUGGESTION-ITEM")?"":(n=(h=n===null||n===void 0?void 0:n.shadowRoot)===null||h===void 0?void 0:h.activeElement,!n||n.nodeName!=="BUTTON"||!n.textContent)?"":(c=n.textContent.trim(),l.find(function(n){return n.text.trim()===c}))?c:""}function at(n){var t=_ge(n);t&&t.parentElement&&t.parentElement.removeChild(t)}function ve(n){CIB.processCachedResponse(n)}function tr(n,t,i,r,u,f,e){n===void 0&&(n="");t===void 0&&(t="");i===void 0&&(i="");r===void 0&&(r="");u===void 0&&(u=!1);f===void 0&&(f=!1);e===void 0&&(e=!1);sj_evt.fire("showSydFSC",n,t,r,u,i,f,e)}function it(n){var r=new RegExp("[?&]{1}q=([^&]+)"),t=n.match(r),i=t?t[1]:null;return i?decodeURIComponent(i.replace("+"," ")):""}function p(){var i,r,u,e=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.isSapphireClient,!1),f,n;return e?it(_w.location.search):(f=typeof sj_b!="undefined"&&sj_b!=null?sj_b:_d.body,n=f.querySelectorAll("textarea.b_searchbox, input.b_searchbox:not(#uaseabox)"),!n||n.length<=0)?"":(u=(r=n[0])===null||r===void 0?void 0:r.getAttribute("value"))!==null&&u!==void 0?u:""}function ye(){var t=new URLSearchParams(_w.location.search),i=t.get(kt);i&&(n.lastQuery=p().toLowerCase().trim())}function ir(n,t,i,r,u,f){var o,e,s;t===void 0&&(t=!1);i===void 0&&(i="");r===void 0&&(r="");u===void 0&&(u=!1);f===void 0&&(f=!1);o="";t&&(o=p());e=i;e||(s=_d.querySelector(".b_ans #b_wpt_data"),s&&(e=s.getAttribute("data-sydctx")));tr(n,e,o,r,!1,u,f)}function pe(n,t){n===void 0&&(n="");t===void 0&&(t="");var i=p();ir(i,!1,n,t,!1,!0)}function we(t){n.isSydFSCEligible=t}function be(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t]}function ke(){sj_evt.fire("clarity.trigger","cibChat")}function de(n,t,i){return!n||t&&(!i||i.toLowerCase().trim()!==p().toLowerCase().trim())}function ge(t,i){var l,a,v,y,p,w,b,k,it,o,d,u,e,s,tt,ht,h,ct,r,c,lt,vt,wt,bt;i===void 0&&(i=!1);it=n.getConfigOrDefault((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableSydCarouselHistory,!1);rr();var f=sj_ce("div","b_metaCont"),rt=sj_ce("div","b_metaCont_Title"),kt=n.getConfigOrDefault((a=_w._sydConvTranslation)===null||a===void 0?void 0:a.sydneyCarouselTitle,"");rt.textContent=kt;f.appendChild(rt);o=sj_ce("div","b_meta_bot");f.appendChild(o);d=sj_ce("div","b_metaChat");u=sj_ce("div","b_metaCont_PillCont","b_meta_hideEx");i?u.appendChild(d):o.appendChild(d);o.appendChild(u);var ut=n.getConfigOrDefault((v=_w._sydConvConfig)===null||v===void 0?void 0:v.carouselQueries,""),dt=n.getConfigOrDefault((y=_w._sydConvConfig)===null||y===void 0?void 0:y.sydCarPropQuery,!1),ft=ut?ut.split(","):null,g=ft?ft:CIB.vm.conversation.model.messages.filter(function(n){return n.type==="meta"&&n.text&&n.text!="Generating answers for you..."}).map(function(n){var i,r,t=(r=(i=n.text)===null||i===void 0?void 0:i.split("`"))!==null&&r!==void 0?r:[];return t.length==1?t[0]:t.length==3?t[1]:""}).filter(function(n){return n}),et=0,gt=i?_w.innerWidth-yt-kr:br,ni=_w.innerWidth-yt-pt,ot=!i,st=gt-pt,ti=CIB.vm.conversation.model._id,nt=!0;for(e=g.length-1;e>=0;e--)s=g[e],nt&&(tt=no(s)+2*dr+gr,et+tt<st?et+=tt:ot?(nt=!1,ht=e+1,h=sj_ce("div","b_meta_exp","b_metaCont_Pill"),h.innerText="+"+ht.toString(),sj_be(h,"click",function(){Lib.CssClass.add(u,"b_metaExpanded")}),u.append(h)):(st=ni,ot=!0)),ct="cdxche",r=sj_ce("a",null,"b_metaCont_Pill"+(nt?"":" b_hide")),r.href=_w.location.origin+_w.location.pathname+"?q="+s+"&form="+ct,it&&(r.href=r.href+"&convid="+ti),dt&&(r.href=r.href+"&features=sydcarousel,sydcpropq"),r.textContent=s,r.target="_blank",sj_be(r,"click",function(t){var r=_ge("CodexCarouselInstLink"),i;_w.si_ct&&_w.si_ct(r);i=t===null||t===void 0?void 0:t.target;n.LogIntEvent("QueryCarouselClick","QueryCarousel",{query:i===null||i===void 0?void 0:i.textContent})}),u.appendChild(r);c=sj_ce("div","b_meta_col","b_metaCont_Pill b_hide");c.innerText=n.getConfigOrDefault((p=_w._sydConvTranslation)===null||p===void 0?void 0:p.sydneyCarouselCollapse,"Collapse");sj_be(c,"click",function(){Lib.CssClass.remove(u,"b_metaExpanded")});u.append(c);g.length>0&&(lt=n.getConfigOrDefault((w=_w._sydConvConfig)===null||w===void 0?void 0:w.suppressAlsoTryWhenEnableSydCarousel,!1),lt&&at("b_alsotry"),vt=n.getConfigOrDefault((b=_w._sydConvConfig)===null||b===void 0?void 0:b.suppressPoleRSWhenEnableSydCarousel,!1),vt&&at("brspole"),wt=n.getConfigOrDefault((k=_w._sydConvConfig)===null||k===void 0?void 0:k.suppressPoleRecommendedSearchWhenEnableSydCarousel,!1),wt&&at("polerecommendedsearch"),t.children.length>0?(bt=_w.getComputedStyle(t,null),bt.paddingLeft=="0px"&&Lib.CssClass.add(f,"b_metaPadding"),t.insertBefore(f,t.children[0])):t.appendChild(f),sj_evt.fire(iu))}function no(n){var i=sj_ce("canvas"),t=i.getContext("2d");return t.font="14px Roboto",t.measureText(n).width}function rr(){var n=_ge("b_metaCont");n&&n.parentElement&&n.parentElement.removeChild(n)}function to(){var n,t,i;((t=(n=CIB.config)===null||n===void 0?void 0:n.knowledgeCards)===null||t===void 0?void 0:t.query)&&(CIB.config.knowledgeCards.query.IG=_G.IG,CIB.config.knowledgeCards.query.IID=(i=_ge("b_sydConvCont"))===null||i===void 0?void 0:i.getAttribute("_iid"))}function vt(n,i,r){var u,f,e,o,s,h,c,l,a,v=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.disable2TSearchHistory,!1),y=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.enable2TTest,!1);((o=(e=CIB===null||CIB===void 0?void 0:CIB.config)===null||e===void 0?void 0:e.answers)===null||o===void 0?void 0:o.query)&&(CIB.config.answers.query.IG=_G.IG,CIB.config.answers.query.IID=(s=_ge("b_sydConvCont"))===null||s===void 0?void 0:s.getAttribute("_iid"),CIB.config.answers.query.cw=n,CIB.config.answers.query.ch=i,v&&(CIB.config.answers.query.dissrchswrite="1"));((c=(h=CIB===null||CIB===void 0?void 0:CIB.config)===null||h===void 0?void 0:h.ads)===null||c===void 0?void 0:c.query)&&(CIB.config.ads.query.IG=_G.IG,CIB.config.ads.query.IID=r?(l=_ge("CodexAdsInstLink"))===null||l===void 0?void 0:l.getAttribute("_iid"):(a=_ge("b_sydConvCont"))===null||a===void 0?void 0:a.getAttribute("_iid"),CIB.config.ads.query.cw=n,CIB.config.ads.query.ch=i,CIB.config.ads.query.form="codexx",v&&(CIB.config.ads.query.dissrchswrite="1"));y&&SydneyTestHelper.set2TTestConfigs()}function io(n,t){var i=fr(n),r=ur(n);if(n)try{vt(i,r,t)}catch(u){Log.Log("CI.Error","SydneyMobile","ClientObserver not loaded")}else vt(i,r,t)}function ur(n){return n?ClientObserver?ClientObserver.getBrowserHeight():vi():ClientObserver.getBrowserHeight()}function fr(t){if(t){var i=ClientObserver?ClientObserver.getBrowserWidth():ai();return i-n.padding2TMobile<n.MIN_WIDTH_MOBILE?n.MIN_WIDTH_MOBILE:i-n.padding2TMobile}return ClientObserver.getBrowserWidth()}function ro(){var i=new URLSearchParams(_w.location.search),n=i.get(ar),t;n&&CIB.addMessageWithData&&(t=decodeURI(n),CIB.addMessageWithData({images:[{type:"url",data:t}]}))}function uo(i,f,e,o,s){var a,v,y,p,h,c,b,l;s===void 0&&(s=!1);var k=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableSydContext,!1),d=t((v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableSQMsg,!1),w=t((y=_w._sydConvConfig)===null||y===void 0?void 0:y.enableSearchQueryTelemetryFix,!1);if(n.enableConvModeSwitchAjax=t((p=_w._sydConvConfig)===null||p===void 0?void 0:p.enableConvModeSwitchAjax,!1),er(i,s)){if(o&&n.enableConvModeSwitchAjax){if(n.isSmoothConvSwitchUpdatedPage())return;try{if(h=CIB.vm.conversation.model.messages.filter(function(n){return n.type==="meta"&&n.text!="Generating answers for you..."||n.type==="text"&&n.author==="user"}),h&&h.length>0&&(c=h[h.length-1].text.split("`"),b=c.length==1?c[0]:c.length==3?c[1]:"",b.toLowerCase()==i.toLowerCase()))return}catch(g){}}l=[];e&&l.push({author:"user",text:e});f&&l.push({author:"bot",text:f});k&&l.length!=0&&CIB.registerContext(l);d&&o&&(!CIB.manager.conversation._lastMessage||w&&CIB.manager.conversation._lastMessage.author==="bot")&&(!CIB.manager.conversation.messages.length||w&&!CIB.manager.conversation.messages.filter(function(n){return n.author==="user"}).length)?CIB.sendSearchQuery(i):(u(r.Interaction,"TranistionToChatWithQuery","SerpToChatTransition",""),CIB.addMessage(i));n.lastQuery=i;n.firstQuery.length==0&&(n.firstQuery=i)}}function er(n,i){var r,u,f,e,o,s;return fo(n)||eo()?!1:(f=tt("showconv"),e=tt("sendquery"),f==="1"&&e==="1"||i)?!0:f==="1"&&e!=="1"?!1:(o=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.initialShowConvPresent,!1),s=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.disableChatQueryForShowConv,!1),s&&o)?!1:!0}function fo(t){return!t||t==n.lastQuery||t==n.firstQuery}function eo(){var n,i,r,u,f=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.bypassConsentCheck,!1),e=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableCodexMuidConsentTop,!1),o=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableCodexMuidConsentExplicit,!1),s=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableCodexMuidConsentImplicit,!1),h=CIB.vm.conversation.model.messages.filter(function(n){return n.author=="user"}).length,c=e||o||s;return c&&!ft&&!ki()&&!(f||h<1)}function or(n,t,i){return i===void 0&&(i="POST"),new Promise(function(r,u){var f=sj_gx();f.onreadystatechange=function(){f.readyState===4&&(f.status===200?r(f):u(f))};f.onerror=function(){u(f)};f.open(i,n,!0);f.setRequestHeader("content-type","application/json");f.send(t)})}function oo(n){return or(n,"","GET").then(function(n){return Promise.resolve(JSON.parse(n.response))})["catch"](function(n){return Promise.reject(n)})}function so(n){var u,f,i,r;return n?(i=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.tigerEnhancedPromptTemplate,""),!i)?n:(i=i.replace("{0}",n),r=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.language,""),r&&r.indexOf("English")<0&&(i+=" Respond in language "+r),i):n}function sr(){var n,t=new URLSearchParams(_w===null||_w===void 0?void 0:_w.location.search);return t.has("form")&&((n=t.get("form"))===null||n===void 0?void 0:n.toLowerCase())==="convaj"&&_w._isConvAjaxUpdated}function ho(){var n,t,i=(t=(n=_d.querySelector("cib-serp"))===null||n===void 0?void 0:n.shadowRoot)===null||t===void 0?void 0:t.querySelector("cib-background");i&&(i.style.height="100%",i.style.width="100%")}function co(){var n,t,i,r,u,f,e=(f=(u=(r=(i=(t=(n=_d.querySelector("cib-serp"))===null||n===void 0?void 0:n.shadowRoot)===null||t===void 0?void 0:t.querySelector("cib-conversation"))===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.querySelector("cib-welcome-container"))===null||u===void 0?void 0:u.shadowRoot)===null||f===void 0?void 0:f.querySelector(".muid-upsell");e&&(e.style.display="none")}function lo(){var t,i,n=(i=(t=_d.querySelector("cib-serp"))===null||t===void 0?void 0:t.shadowRoot)===null||i===void 0?void 0:i.querySelector("cib-conversation"),r,u;(n===null||n===void 0?void 0:n.shadowRoot)&&(r=n.shadowRoot.querySelector(".scroller"),r&&(u=r.querySelector(".fade.top"),u&&(u.style.display="none")))}function ao(){var r,i,u;ot=__spreadArray([],CIB.config.sydney.request.optionsSets,!0);i=n.getAllowedToneOptionsSets(n.PRECISE_TONE);u=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.threadsAutoSaveOptionset,"autosave");i=i.filter(function(n){return n!==u});hi.forEach(function(t){n.addOptionSet(i,t)});CIB.config.sydney.request.optionsSets=i;CIB.showNotebook&&CIB.showNotebook();_G[n.SYD_PREV_MODE]=_G[n.SYD_MODE];_G[n.SYD_MODE]="notebook"}function vo(){CIB.config.sydney.request.optionsSets=__spreadArray([],ot,!0);var t=n.getAllowedToneOptionsSets(CIB.responseTone);CIB.config.sydney.request.optionsSets=t}function yo(){var n=FreeSydneyHelper.getFreeSydneyPersonasData();CIB.setFreeSydneyData&&CIB.setFreeSydneyData(n)}function po(){var n=FreeSydneyHelper.getFreeSydneyPersonasData();return n&&n.freeSydneyPersonaModels.length>0?n.freeSydneyPersonaModels[0]:null}var hr="sydneyOptionsSets",cr="codexFeatures",lr="speechSrOptions",ar="imgUrl",kt,w;n.CREATIVE_TONE="Creative";n.BALANCED_TONE="Balanced";n.PRECISE_TONE="Precise";var rt=5,vr=2,yr=2e3,pr=1e7,wr=15e6,br=750,yt=48,kr=42,dr=16,gr=6,pt=60,wt=66,nu=1e3,tu="so_bing_chat",bt="seltone",iu="SydAddCarousel";n.SYD_MODE="SydMode";n.SYD_PREV_MODE="SydPrevMode";n.lastQuery=(n===null||n===void 0?void 0:n.lastQuery)?n===null||n===void 0?void 0:n.lastQuery:"";n.firstQuery="";n.ignoreFirstOffStage=!1;n.shouldResetBotGreeting=!0;n.shouldForceSendBotGreeting=!1;kt="shareId";n.userCook="SRCHHPGUSR";n.toneCook="CDXTC";n.toneCrumb="cdxtone";n.toneOptsCrumb="cdxtoneopts";w="InitialTone";n.hasSetToneCrumb="cdxts";var ru="crtone",uu="cdxwinturn",fu="ADLT",b="MUID",dt="CMUID",eu="BCTTSOS",gt="VSRO",ni="BFBUSR",ou="CMUIDBCE",ti="CIBV",su="BCML",hu=["chips","query","searchQuery","text"],ut="<stripped/>",ii="cdxModalVisible",cu="aad",k="",d="",ri=!1,ui=!1,fi=!0,l=dt,a=!1,ft=!1,r={System:"SystemEvent",Interaction:"InteractionEvent"},i={Creative:"h3imaginative",Balanced:"harmonyv3",Precise:"h3precise"},g={c:"Creative",b:"Balanced",p:"Precise"},s={Creative:[],Balanced:[],Precise:[]},h="",ei=!1,o=!1,oi=!1,et=-1,si="",ot,hi=[],nt={Off:"1",Demote:"2",Strict:"4",KidSafe:"8",Stricter:"16",AdultOnly:"32"};n.isSydFSCEligible=n.isSydFSCEligible?n.isSydFSCEligible:!1;n.isConfigSet=!1;n.enableCreatorSendQueryWhenShowConvQuery=!0;n.padding2TMobile=92;n.MIN_WIDTH_MOBILE=288;n.enableConvModeSwitchAjax=!1;n.enableBingChatPath=!1;n.setConfigs=lu;n.setTestConfigs=ci;n.setColorScheme=au;n.getMobileBrowserWidth=ai;n.getMobileBrowserHeight=vi;n.getCookieTone=v;n.updateResponseToneAfterSerp=df;n.addOptionSet=f;n.getConfigOrDefault=t;n.getAllowedToneOptionsSets=re;n.SydLog=u;n.LogIntEvent=gi;n.setupHistory=fe;n.pushSydHistory=ee;n.updateConvFlagInURL=nr;n.updateConvPageTitle=he;n.checkInitialState=ce;n.setEventListeners=le;n.getActiveSuggestionChipText=ae;n.processCachedResponseUsingCIB=ve;n.triggerSydFSC=tr;n.getQuery=p;n.triggerShareFlow=ye;n.triggerSydFSCWithContext=ir;n.triggerSydFSCQueryWithContext=pe;n.setSydFSCEligibleState=we;n.sydPayWallTrace=be;n.triggerClarity=ke;n.shouldMove1TAnswers=de;n.addCarousel=ge;n.removeQueries=rr;n.set2TQueryConfigs=vt;n.retrieveSydneyFSCClientHeight=ur;n.retrieveSydneyFSCClientWidth=fr;n.submitVisualSearchImage=ro;n.sendFirstQuery=uo;n.shouldSendQuery=er;n.createRequest=or;n.getJsonData=oo;n.createIntelligentQuery=so;n.isSmoothConvSwitchUpdatedPage=sr;n.updateChatBackgroundWidth=ho;n.hideSignInUpsellFor3P=co;n.hideTopFade=lo;n.setNotebookOptions=ao;n.setDefaultOptions=vo;n.setFreeSydneyData=yo;n.getDefaultFreeSydneyData=po;sj_evt.fire("SydFSCHelperLoaded")})(SydFSCHelper||(SydFSCHelper={}))